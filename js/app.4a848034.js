(function(){"use strict";var e={3678:function(e,n,s){var o=s(5130),a=(s(4114),s(8111),s(2489),s(7588),s(4603),s(7566),s(8721),s(6768)),t=s(4232),r=s(144),c=s(4286),l=(s(116),s(1701),s(8237),s(3579),s(9562));const i={class:"chinese-compare"},u={key:0,class:"auto-fill-notice"},f={class:"case-selector"},y={class:"case-actions"},d=["disabled"],m={key:0,class:"case-description"},v={class:"diff-comparison-section"},A={class:"diff-controls"},p={class:"diff-options"},S={class:"option-checkbox"},P={class:"diff-buttons"},h=["disabled"],g={key:0,class:"diff-results"},b={class:"diff-statistics"},k={key:0,class:"pronunciation-badge"},D={class:"stats-grid"},O={class:"stat-item"},L={class:"stat-value similarity"},T={class:"stat-item"},R={class:"stat-value accuracy"},N={class:"stat-item"},E={class:"stat-value insertions"},W={class:"stat-item"},w={class:"stat-value deletions"},C={class:"stat-item"},x={class:"stat-value modifications"},_={class:"stat-item"},I={class:"stat-value change-rate"},B={key:0,class:"stat-item"},X={class:"stat-value pronunciation-errors"},$={key:1,class:"stat-item"},j={class:"stat-value pronunciation-accuracy"},M={class:"diff-visualization"},z={key:0,class:"processing-info"},Q={class:"processed-texts"},F={class:"processed-item"},K={class:"processed-item"},J={class:"processed-item special"},U={class:"processed-item special"},H=["innerHTML"],V={key:0,class:"pronunciation-analysis-integrated"},q={class:"pronunciation-content"},G=["innerHTML"],Y={class:"pronunciation-summary"},Z={class:"pronunciation-stats-mini"},ee={class:"mini-stat"},ne={class:"mini-value error-count"},se={class:"mini-stat"},oe={class:"mini-value accuracy-avg"},ae={class:"mini-stat"},te={class:"mini-value lowest-confidence"},re={key:1,class:"diff-details"},ce={key:0,class:"change-section"},le={class:"inserted-text"},ie={key:1,class:"change-section"},ue={class:"deleted-text"},fe={key:2,class:"change-section"},ye={class:"mod-position"},de={class:"mod-change"},me={class:"mod-deleted"},ve={class:"mod-inserted"},Ae={class:"diff-raw-data"},pe={class:"json-display"},Se={class:"input-section"},Pe={class:"input-group"},he={class:"input-group"},ge={class:"pronunciation-settings"},be={class:"input-group"},ke={class:"json-help"},De=["disabled"],Oe=["disabled"],Le={key:1,class:"analysis-section"},Te={class:"accuracy-section"},Re={class:"accuracy-circle"},Ne={class:"accuracy-percent"},Ee={class:"comparison-grid"},We={class:"original-text"},we={class:"word-list"},Ce=["title"],xe={class:"token-info"},_e={class:"compare-text"},Ie={class:"word-list"},Be=["title"],Xe={class:"token-info"},$e={key:0,class:"sr-api-section"},je={class:"sr-api-grid"},Me={class:"sr-card"},ze={class:"stats-grid"},Qe={class:"stat-item"},Fe={class:"stat-value"},Ke={class:"stat-item"},Je={class:"stat-value error"},Ue={class:"stat-item"},He={class:"stat-value"},Ve={class:"stat-item"},qe={class:"stat-value"},Ge={class:"sr-card"},Ye={key:0,class:"pronunciation-errors"},Ze={class:"error-word"},en={class:"error-score"},nn={class:"error-type"},sn={key:1,class:"no-errors"},on={class:"success"},an={class:"details-section"},tn={class:"detail-card error"},rn={class:"word-tags"},cn={key:0,class:"no-data"},ln={class:"detail-card insertion"},un={class:"word-tags"},fn={key:0,class:"no-data"},yn={class:"detail-card omission"},dn={class:"word-tags"},mn={key:0,class:"no-data"},vn={class:"detail-card pronunciation-error"},An={class:"word-tags"},pn=["title"],Sn={key:0,class:"no-data"},Pn={key:0,class:"detail-card sr-info"},hn={class:"sr-details"},gn={key:1,class:"detail-card no-sr-info"};var bn={__name:"ChineseCompare",props:{uploadResult:{type:Object,default:null},referenceText:{type:String,default:""}},setup(e){const n=e,s=(0,r.KR)("尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。"),bn=(0,r.KR)("尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好。"),kn=(0,r.KR)(null),Dn=(0,r.KR)(90),On=(0,r.KR)([]),Ln=new c.M_;console.log("🔍 TextComparator 메서드 확인:"),console.log("- diffsToHtml:",typeof Ln.diffsToHtml),console.log("- diffsToHtmlWithMoveDetection:",typeof Ln.diffsToHtmlWithMoveDetection),console.log("- detectMoves:",typeof Ln.detectMoves),console.log("- Available methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(Ln)).filter(e=>"constructor"!==e));const Tn=(0,r.KR)(null),Rn=(0,r.KR)(""),Nn=(0,r.KR)(!0),En=(0,r.KR)([]),Wn=(0,r.KR)(""),wn=(0,r.KR)(!1),Cn=(0,r.KR)(""),xn=(0,r.KR)(!1),_n=(0,r.KR)(""),In=(0,r.KR)(!1),Bn=new c.dq,Xn=new l.SegmentitTokenizer;function $n(e){return null===e||void 0===e?"":String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function jn(e){if(!Array.isArray(e))return"";let n="";return e.forEach(e=>{const s=e?.type||"common",o=$n(e?.value||"");switch(s){case"added":n+=`<span class="added">${o}</span>`;break;case"removed":n+=`<span class="removed">${o}</span>`;break;case"moved":n+=`<span class="moved">${o}</span>`;break;case"common":default:n+=`<span>${o}</span>`;break}}),n}function Mn(e){try{console.log("🔍 fillDataFromUploadResult 호출됨"),console.log("📦 전체 uploadResult:",e);const o=e.evaluateResult?.data;if(console.log("📊 evaluateData:",o),!o){console.log("❌ evaluateData가 없습니다. 다른 구조를 확인해보겠습니다."),e.evaluateResult&&console.log("📋 evaluateResult 전체:",e.evaluateResult),e.data&&console.log("📋 data 전체:",e.data);let n=null;e.evaluateResult?.speechText?(n=e.evaluateResult.speechText,console.log("✅ evaluateResult.speechText에서 찾음:",n)):e.speechText?(n=e.speechText,console.log("✅ uploadResult.speechText에서 찾음:",n)):e.data?.speechText?(n=e.data.speechText,console.log("✅ uploadResult.data.speechText에서 찾음:",n)):console.log("❌ speechText를 찾을 수 없습니다."),n&&(bn.value=n,console.log("✅ compareText 설정됨:",bn.value));let s=null;if(e.evaluateResult?.nbest?(s=e.evaluateResult.nbest,console.log("✅ evaluateResult.nbest에서 찾음")):e.evaluateResult?.NBest?(s=e.evaluateResult.NBest,console.log("✅ evaluateResult.NBest에서 찾음")):e.nbest?(s=e.nbest,console.log("✅ uploadResult.nbest에서 찾음")):e.NBest?(s=e.NBest,console.log("✅ uploadResult.NBest에서 찾음")):e.data?.nbest?(s=e.data.nbest,console.log("✅ uploadResult.data.nbest에서 찾음")):e.data?.NBest&&(s=e.data.NBest,console.log("✅ uploadResult.data.NBest에서 찾음")),s){const e=s.map(e=>({...e,Words:e.words||e.Words||[],Display:e.Display||bn.value||"비교 문장",Confidence:e.Confidence||.9,Lexical:e.Lexical||bn.value||"비교 문장",ITN:e.ITN||bn.value||"비교 문장",MaskedITN:e.MaskedITN||bn.value||"비교 문장"})),n={Id:"auto-generated",RecognitionStatus:"Success",DisplayText:bn.value||"비교 문장",NBest:e,SNR:20,Duration:0,Offset:0,Channel:0};Cn.value=JSON.stringify(n,null,2),console.log("✅ 전체 SR API 결과 구조로 srResultJson 설정됨:",s.length,"개 항목"),console.log("📝 설정된 srResultJson.value:",Cn.value.substring(0,200)+"..."),console.log("🎯 생성된 전체 SR 결과:",n)}else console.log("❌ nbest 데이터를 찾을 수 없습니다.");return}n.referenceText&&(s.value=n.referenceText,console.log("✅ 원문 설정됨:",s.value)),o.speechText?(bn.value=o.speechText,console.log("✅ compareText 설정됨:",bn.value)):console.log("❌ evaluateData.speechText가 없습니다.");let a=null;if(o.nbest?(a=o.nbest,console.log("✅ evaluateData.nbest에서 찾음")):o.NBest?(a=o.NBest,console.log("✅ evaluateData.NBest에서 찾음")):o.srResult?.nbest?(a=o.srResult.nbest,console.log("✅ evaluateData.srResult.nbest에서 찾음")):o.srResult?.NBest&&(a=o.srResult.NBest,console.log("✅ evaluateData.srResult.NBest에서 찾음")),a){const e=a.map(e=>({...e,Words:e.words||e.Words||[],Display:e.Display||bn.value||"비교 문장",Confidence:e.Confidence||.9,Lexical:e.Lexical||bn.value||"비교 문장",ITN:e.ITN||bn.value||"비교 문장",MaskedITN:e.MaskedITN||bn.value||"비교 문장"})),n={Id:"auto-generated",RecognitionStatus:"Success",DisplayText:bn.value||"비교 문장",NBest:e,SNR:20,Duration:0,Offset:0,Channel:0};Cn.value=JSON.stringify(n,null,2),console.log("✅ 전체 SR API 결과 구조로 srResult 설정됨:",a.length,"개 항목"),console.log("🎯 생성된 전체 SR 결과:",n)}else o.srResult?(Cn.value=JSON.stringify(o.srResult,null,2),console.log("✅ srResult 전체 데이터로 설정됨")):console.log("❌ nbest, srResult 데이터를 찾을 수 없습니다.");In.value=!0,console.log("✅ 업로드 결과에서 데이터 자동 입력 완료"),setTimeout(()=>Jn(),500)}catch(o){console.error("❌ 업로드 결과 데이터 파싱 오류:",o)}}function zn(){In.value=!1,s.value="尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",bn.value="尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好。",Cn.value="",kn.value=null,_n.value=""}(0,a.wB)(()=>n.uploadResult,(e,n)=>{console.log("👀 watch 트리거됨!"),console.log("🆕 새로운 결과:",e),console.log("🔄 이전 결과:",n),e?(console.log("✅ newResult가 존재합니다. 데이터 구조 분석 시작..."),Mn(e)):console.log("❌ newResult가 null/undefined입니다.")},{deep:!0,immediate:!0});const Qn={greeting:{originalText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",compareText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",srResultJson:'{"Id":"78ea35e35fde409ea980b5a16514e503","RecognitionStatus":"Success","Offset":9600000,"Duration":79900000,"Channel":0,"DisplayText":"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。","SNR":19.60597,"NBest":[{"Confidence":0.9640445,"Lexical":"尽管 吃 了 不少 苦 但是 那 段 时光 最终 成为 了 难以 忘记 的 美好 回忆","ITN":"尽管 吃 了 不少 苦 但是 那 段 时光 最终 成为 了 难以 忘记 的 美好 回忆","MaskedITN":"尽管吃了不少苦但是那段时光最终成为了难以忘记的美好回忆","Display":"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。","PronunciationAssessment":{"AccuracyScore":91.0,"FluencyScore":98.0,"CompletenessScore":100.0,"PronScore":94.2},"Words":[{"Word":"尽管","Offset":9600000,"Duration":9900000,"PronunciationAssessment":{"AccuracyScore":66.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":89.0},"Offset":9600000,"Duration":9900000}],"Phonemes":[{"Phoneme":"jin 3","PronunciationAssessment":{"AccuracyScore":51.0},"Offset":9600000,"Duration":6300000},{"Phoneme":"guan 3","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":16000000,"Duration":3500000}]},{"Word":"吃","Offset":19600000,"Duration":2700000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":19600000,"Duration":2700000}],"Phonemes":[{"Phoneme":"chi 1","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":19600000,"Duration":2700000}]},{"Word":"了","Offset":22400000,"Duration":1500000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":22400000,"Duration":1500000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":22400000,"Duration":1500000}]},{"Word":"不少","Offset":24000000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":87.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":24000000,"Duration":5100000}],"Phonemes":[{"Phoneme":"bu 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":24000000,"Duration":1900000},{"Phoneme":"shao 3","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":26000000,"Duration":3100000}]},{"Word":"苦","Offset":29200000,"Duration":5700000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":29200000,"Duration":5700000}],"Phonemes":[{"Phoneme":"ku 3","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":29200000,"Duration":5700000}]},{"Word":"但是","Offset":36200000,"Duration":5700000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":36200000,"Duration":3900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":40200000,"Duration":1700000}],"Phonemes":[{"Phoneme":"dan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":36200000,"Duration":3900000},{"Phoneme":"shi 4","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":40200000,"Duration":1700000}]},{"Word":"那","Offset":42000000,"Duration":1500000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":42000000,"Duration":1500000}],"Phonemes":[{"Phoneme":"na 4","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":42000000,"Duration":1500000}]},{"Word":"段","Offset":43600000,"Duration":2700000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":43600000,"Duration":2700000}],"Phonemes":[{"Phoneme":"duan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":43600000,"Duration":2700000}]},{"Word":"时光","Offset":46400000,"Duration":7000000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":46400000,"Duration":2500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":49000000,"Duration":4400000}],"Phonemes":[{"Phoneme":"shi 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":46400000,"Duration":2500000},{"Phoneme":"guang 1","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":49000000,"Duration":4400000}]},{"Word":"最终","Offset":53700000,"Duration":5200000,"PronunciationAssessment":{"AccuracyScore":93.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":53700000,"Duration":2800000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":56600000,"Duration":2300000}],"Phonemes":[{"Phoneme":"zui 4","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":53700000,"Duration":2800000},{"Phoneme":"zhong 1","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":56600000,"Duration":2300000}]},{"Word":"成为","Offset":59000000,"Duration":4500000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":59000000,"Duration":2500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":61600000,"Duration":1900000}],"Phonemes":[{"Phoneme":"cheng 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":59000000,"Duration":2500000},{"Phoneme":"wei 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":61600000,"Duration":1900000}]},{"Word":"了","Offset":63600000,"Duration":2900000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":63600000,"Duration":2900000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":63600000,"Duration":2900000}]},{"Word":"难以","Offset":66600000,"Duration":3300000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":66600000,"Duration":1900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":68600000,"Duration":1300000}],"Phonemes":[{"Phoneme":"nan 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":66600000,"Duration":1900000},{"Phoneme":"yi 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":68600000,"Duration":1300000}]},{"Word":"忘记","Offset":70000000,"Duration":4900000,"PronunciationAssessment":{"AccuracyScore":100.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":70000000,"Duration":2900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":73000000,"Duration":1900000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":70000000,"Duration":2900000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":73000000,"Duration":1900000}]},{"Word":"的","Offset":75000000,"Duration":2100000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":75000000,"Duration":2100000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":75000000,"Duration":2100000}]},{"Word":"美好","Offset":77200000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":96.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":77200000,"Duration":5100000}],"Phonemes":[{"Phoneme":"mei 3","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":77200000,"Duration":2500000},{"Phoneme":"hao 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":79800000,"Duration":2500000}]},{"Word":"回忆","Offset":82400000,"Duration":7100000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82400000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":84800000,"Duration":4700000}],"Phonemes":[{"Phoneme":"hui 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82400000,"Duration":2300000},{"Phoneme":"yi 4","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":84800000,"Duration":4700000}]}]}]}'},"pronunciation-error":{originalText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",compareText:"尽管我吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",srResultJson:'{"Id":"f098a30a879c4db48a6059b0d0c61469","RecognitionStatus":"Success","Offset":8000000,"Duration":74000000,"Channel":0,"DisplayText":"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。","SNR":20.44014,"NBest":[{"Confidence":0.95662117,"Lexical":"尽管 吃 了 不少 苦 但是 那 段 时光 最终 成为 了 难以 忘记 的 美好 回忆","ITN":"尽管 吃 了 不少 苦 但是 那 段 时光 最终 成为 了 难以 忘记 的 美好 回忆","MaskedITN":"尽管吃了不少苦但是那段时光最终成为了难以忘记的美好回忆","Display":"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。","PronunciationAssessment":{"AccuracyScore":88.0,"FluencyScore":98.0,"CompletenessScore":88.0,"PronScore":90.0},"Words":[{"Word":"尽管","Offset":8000000,"Duration":9900000,"PronunciationAssessment":{"AccuracyScore":53.0,"ErrorType":"Mispronunciation"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":84.0},"Offset":8000000,"Duration":9900000}],"Phonemes":[{"Phoneme":"jin 3","PronunciationAssessment":{"AccuracyScore":51.0},"Offset":8000000,"Duration":5500000},{"Phoneme":"guan 3","PronunciationAssessment":{"AccuracyScore":56.0},"Offset":13600000,"Duration":4300000}]},{"Word":"吃","Offset":18600000,"Duration":3600000,"PronunciationAssessment":{"AccuracyScore":58.0,"ErrorType":"Mispronunciation"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":58.0},"Offset":18600000,"Duration":3600000}],"Phonemes":[{"Phoneme":"chi 1","PronunciationAssessment":{"AccuracyScore":58.0},"Offset":18600000,"Duration":3600000}]},{"Word":"了","Offset":22300000,"Duration":1400000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":22300000,"Duration":1400000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":22300000,"Duration":1400000}]},{"Word":"不少","Offset":23800000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":89.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":99.0},"Offset":23800000,"Duration":5100000}],"Phonemes":[{"Phoneme":"bu 4  ","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":23800000,"Duration":1900000},{"Phoneme":"shao 3","PronunciationAssessment":{"AccuracyScore":82.0},"Offset":25800000,"Duration":3100000}]},{"Word":"苦","Offset":29000000,"Duration":4700000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":29000000,"Duration":4700000}],"Phonemes":[{"Phoneme":"ku 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":29000000,"Duration":4700000}]},{"Word":"但是","Offset":34400000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":93.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":34400000,"Duration":3500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":38000000,"Duration":1500000}],"Phonemes":[{"Phoneme":"dan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":34400000,"Duration":3500000},{"Phoneme":"shi 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":38000000,"Duration":1500000}]},{"Word":"那","Offset":39600000,"Duration":1500000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":39600000,"Duration":1500000}],"Phonemes":[{"Phoneme":"na 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":39600000,"Duration":1500000}]},{"Word":"段","Offset":41200000,"Duration":2700000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":41200000,"Duration":2700000}],"Phonemes":[{"Phoneme":"duan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":41200000,"Duration":2700000}]},{"Word":"时光","Offset":44000000,"Duration":5900000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":44000000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":46400000,"Duration":3500000}],"Phonemes":[{"Phoneme":"shi 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":44000000,"Duration":2300000},{"Phoneme":"guang 1","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":46400000,"Duration":3500000}]},{"Word":"最终","Offset":50000000,"Duration":5700000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":50000000,"Duration":2500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":52600000,"Duration":3100000}],"Phonemes":[{"Phoneme":"zui 4","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":50000000,"Duration":2500000},{"Phoneme":"zhong 1","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":52600000,"Duration":3100000}]},{"Word":"成为","Offset":55800000,"Duration":4300000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":55800000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":58200000,"Duration":1900000}],"Phonemes":[{"Phoneme":"cheng 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":55800000,"Duration":2300000},{"Phoneme":"wei 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":58200000,"Duration":1900000}]},{"Word":"了","Offset":60200000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":60200000,"Duration":1300000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":60200000,"Duration":1300000}]},{"Word":"难以","Offset":61600000,"Duration":3100000,"PronunciationAssessment":{"AccuracyScore":92.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":61600000,"Duration":2000000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":63700000,"Duration":1000000}],"Phonemes":[{"Phoneme":"nan 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":61600000,"Duration":2000000},{"Phoneme":"yi 3","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":63700000,"Duration":1000000}]},{"Word":"忘记","Offset":64800000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":100.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":64800000,"Duration":3100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":68000000,"Duration":1900000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":64800000,"Duration":3100000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":68000000,"Duration":1900000}]},{"Word":"的","Offset":70000000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":70000000,"Duration":1300000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":70000000,"Duration":1300000}]},{"Word":"美好","Offset":71400000,"Duration":4300000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":71400000,"Duration":4300000}],"Phonemes":[{"Phoneme":"mei 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":71400000,"Duration":2100000},{"Phoneme":"hao 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":73600000,"Duration":2100000}]},{"Word":"回忆","Offset":75800000,"Duration":6200000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":75800000,"Duration":1700000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":77600000,"Duration":4400000}],"Phonemes":[{"Phoneme":"hui 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":75800000,"Duration":1700000},{"Phoneme":"yi 4","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":77600000,"Duration":4400000}]}]}]}'},omission:{originalText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",compareText:"尽管我吃了不少苦，但是那段时光最终成为了难以忘记的美好的回忆。",srResultJson:'{"Id":"3d5e8151fa164a8db311a523681197f3","RecognitionStatus":"Success","Offset":7800000,"Duration":81200000,"Channel":0,"DisplayText":"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好的回忆。","SNR":20.936401,"NBest":[{"Confidence":0.94956464,"Lexical":"尽管 吃 了 不少 苦 但是 那 段 时光 最终 成为 了 难以 忘记 的 美好 的 回忆","ITN":"尽管 吃 了 不少 苦 但是 那 段 时光 最终 成为 了 难以 忘记 的 美好 的 回忆","MaskedITN":"尽管吃了不少苦但是那段时光最终成为了难以忘记的美好的回忆","Display":"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好的回忆。","PronunciationAssessment":{"AccuracyScore":86.0,"FluencyScore":96.0,"CompletenessScore":88.0,"PronScore":88.4},"Words":[{"Word":"尽管","Offset":7800000,"Duration":8100000,"PronunciationAssessment":{"AccuracyScore":58.0,"ErrorType":"Mispronunciation"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":58.0},"Offset":7800000,"Duration":3900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":58.0},"Offset":11800000,"Duration":4100000}],"Phonemes":[{"Phoneme":"jin 2","PronunciationAssessment":{"AccuracyScore":58.0},"Offset":7800000,"Duration":3900000},{"Phoneme":"guan 3","PronunciationAssessment":{"AccuracyScore":58.0},"Offset":11800000,"Duration":4100000}]},{"Word":"吃","Offset":16500000,"Duration":3400000,"PronunciationAssessment":{"AccuracyScore":43.0,"ErrorType":"Mispronunciation"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":43.0},"Offset":16500000,"Duration":3400000}],"Phonemes":[{"Phoneme":"chi 1","PronunciationAssessment":{"AccuracyScore":43.0},"Offset":16500000,"Duration":3400000}]},{"Word":"了","Offset":20000000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":20000000,"Duration":1300000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":20000000,"Duration":1300000}]},{"Word":"不少","Offset":21400000,"Duration":4900000,"PronunciationAssessment":{"AccuracyScore":80.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":21400000,"Duration":4900000}],"Phonemes":[{"Phoneme":"bu 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":21400000,"Duration":1700000},{"Phoneme":"shao 3","PronunciationAssessment":{"AccuracyScore":68.0},"Offset":23200000,"Duration":3100000}]},{"Word":"苦","Offset":26400000,"Duration":5500000,"PronunciationAssessment":{"AccuracyScore":82.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":82.0},"Offset":26400000,"Duration":5500000}],"Phonemes":[{"Phoneme":"ku 3","PronunciationAssessment":{"AccuracyScore":82.0},"Offset":26400000,"Duration":5500000}]},{"Word":"但是","Offset":32800000,"Duration":6100000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":32800000,"Duration":4300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":37200000,"Duration":1700000}],"Phonemes":[{"Phoneme":"dan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":32800000,"Duration":4300000},{"Phoneme":"shi 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":37200000,"Duration":1700000}]},{"Word":"那","Offset":39000000,"Duration":1500000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":39000000,"Duration":1500000}],"Phonemes":[{"Phoneme":"na 4","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":39000000,"Duration":1500000}]},{"Word":"段","Offset":40600000,"Duration":2300000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":40600000,"Duration":2300000}],"Phonemes":[{"Phoneme":"duan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":40600000,"Duration":2300000}]},{"Word":"时光","Offset":43000000,"Duration":7500000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":43000000,"Duration":2500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":45600000,"Duration":4900000}],"Phonemes":[{"Phoneme":"shi 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":43000000,"Duration":2500000},{"Phoneme":"guang 1","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":45600000,"Duration":4900000}]},{"Word":"最终","Offset":50800000,"Duration":5700000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":50800000,"Duration":2900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":53800000,"Duration":2700000}],"Phonemes":[{"Phoneme":"zui 4","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":50800000,"Duration":2900000},{"Phoneme":"zhong 1","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":53800000,"Duration":2700000}]},{"Word":"成为","Offset":56600000,"Duration":4400000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":56600000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":59000000,"Duration":2000000}],"Phonemes":[{"Phoneme":"cheng 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":56600000,"Duration":2300000},{"Phoneme":"wei 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":59000000,"Duration":2000000}]},{"Word":"了","Offset":61100000,"Duration":1600000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":61100000,"Duration":1600000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":61100000,"Duration":1600000}]},{"Word":"难以","Offset":62800000,"Duration":3500000,"PronunciationAssessment":{"AccuracyScore":92.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":62800000,"Duration":2200000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":65100000,"Duration":1200000}],"Phonemes":[{"Phoneme":"nan 2","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":62800000,"Duration":2200000},{"Phoneme":"yi 3","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":65100000,"Duration":1200000}]},{"Word":"忘记","Offset":66400000,"Duration":5300000,"PronunciationAssessment":{"AccuracyScore":100.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":66400000,"Duration":3100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":69600000,"Duration":2100000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":66400000,"Duration":3100000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":69600000,"Duration":2100000}]},{"Word":"的","Offset":71800000,"Duration":2500000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":71800000,"Duration":2500000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":71800000,"Duration":2500000}]},{"Word":"美好","Offset":74600000,"Duration":6700000,"PronunciationAssessment":{"AccuracyScore":87.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":74600000,"Duration":6700000}],"Phonemes":[{"Phoneme":"mei 3","PronunciationAssessment":{"AccuracyScore":82.0},"Offset":74600000,"Duration":4300000},{"Phoneme":"hao 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":79000000,"Duration":2300000}]},{"Word":"的","Offset":81400000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"Insertion"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":81400000,"Duration":1300000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":81400000,"Duration":1300000}]},{"Word":"回忆","Offset":82800000,"Duration":6200000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82800000,"Duration":1900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":84800000,"Duration":4200000}],"Phonemes":[{"Phoneme":"hui 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82800000,"Duration":1900000},{"Phoneme":"yi 4","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":84800000,"Duration":4200000}]}]}]}'},insertion:{originalText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",compareText:"尽管我吃了不少苦，但是那段时光最终还是成为了难以忘记的美好的回忆。",srResultJson:'{"Id":"67e494dbb9e849b1809f611d9b417acc","RecognitionStatus":"Success","Offset":7800000,"Duration":81200000,"Channel":0,"DisplayText":"尽管忘记吃了不少苦，但是那段时光最终但是成为了难以忘记的美好的回忆。","SNR":20.348295,"NBest":[{"Confidence":0.9352255,"Lexical":"尽管 忘记 吃 了 不少 苦 但是 那 段 时光 最终 但是 成为 了 难以 忘记 的 美好 的 回忆","ITN":"尽管 忘记 吃 了 不少 苦 但是 那 段 时光 最终 但是 成为 了 难以 忘记 的 美好 的 回忆","MaskedITN":"尽管忘记吃了不少苦但是那段时光最终但是成为了难以忘记的美好的回忆","Display":"尽管忘记吃了不少苦，但是那段时光最终但是成为了难以忘记的美好的回忆。","PronunciationAssessment":{"AccuracyScore":88.0,"FluencyScore":91.0,"CompletenessScore":100.0,"PronScore":91.0},"Words":[{"Word":"尽管","Offset":7800000,"Duration":7100000,"PronunciationAssessment":{"AccuracyScore":81.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":96.0},"Offset":7800000,"Duration":7100000}],"Phonemes":[{"Phoneme":"jin 3","PronunciationAssessment":{"AccuracyScore":67.0},"Offset":7800000,"Duration":3700000},{"Phoneme":"guan 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":11600000,"Duration":3300000}]},{"Word":"忘记","Offset":15000000,"Duration":2100000,"PronunciationAssessment":{"AccuracyScore":38.0,"ErrorType":"Insertion"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":45.0},"Offset":15000000,"Duration":1200000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":29.0},"Offset":16300000,"Duration":800000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":45.0},"Offset":15000000,"Duration":1200000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":29.0},"Offset":16300000,"Duration":800000}]},{"Word":"吃","Offset":17200000,"Duration":1900000,"PronunciationAssessment":{"AccuracyScore":67.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":67.0},"Offset":17200000,"Duration":1900000}],"Phonemes":[{"Phoneme":"chi 1","PronunciationAssessment":{"AccuracyScore":67.0},"Offset":17200000,"Duration":1900000}]},{"Word":"了","Offset":19200000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":19200000,"Duration":1300000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":19200000,"Duration":1300000}]},{"Word":"不少","Offset":20600000,"Duration":4700000,"PronunciationAssessment":{"AccuracyScore":87.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":99.0},"Offset":20600000,"Duration":4700000}],"Phonemes":[{"Phoneme":"bu 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":20600000,"Duration":1700000},{"Phoneme":"shao 3","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":22400000,"Duration":2900000}]},{"Word":"苦","Offset":25400000,"Duration":5500000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":25400000,"Duration":5500000}],"Phonemes":[{"Phoneme":"ku 3","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":25400000,"Duration":5500000}]},{"Word":"但是","Offset":31400000,"Duration":5200000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":31400000,"Duration":3300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":34800000,"Duration":1800000}],"Phonemes":[{"Phoneme":"dan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":31400000,"Duration":3300000},{"Phoneme":"shi 4","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":34800000,"Duration":1800000}]},{"Word":"那","Offset":36700000,"Duration":1400000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":36700000,"Duration":1400000}],"Phonemes":[{"Phoneme":"na 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":36700000,"Duration":1400000}]},{"Word":"段","Offset":38200000,"Duration":2500000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":38200000,"Duration":2500000}],"Phonemes":[{"Phoneme":"duan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":38200000,"Duration":2500000}]},{"Word":"时光","Offset":40800000,"Duration":6900000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":40800000,"Duration":2500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":43400000,"Duration":4300000}],"Phonemes":[{"Phoneme":"shi 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":40800000,"Duration":2500000},{"Phoneme":"guang 1","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":43400000,"Duration":4300000}]},{"Word":"最终","Offset":48000000,"Duration":8100000,"PronunciationAssessment":{"AccuracyScore":70.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":48000000,"Duration":4700000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":49.0},"Offset":52800000,"Duration":3300000}],"Phonemes":[{"Phoneme":"zui 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":48000000,"Duration":4700000},{"Phoneme":"zhong 1","PronunciationAssessment":{"AccuracyScore":49.0},"Offset":52800000,"Duration":3300000}]},{"Word":"但是","Offset":56400000,"Duration":3100000,"PronunciationAssessment":{"AccuracyScore":45.0,"ErrorType":"Insertion"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":31.0},"Offset":56400000,"Duration":1300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":56.0},"Offset":57800000,"Duration":1700000}],"Phonemes":[{"Phoneme":"dan 4","PronunciationAssessment":{"AccuracyScore":31.0},"Offset":56400000,"Duration":1300000},{"Phoneme":"shi 4","PronunciationAssessment":{"AccuracyScore":56.0},"Offset":57800000,"Duration":1700000}]},{"Word":"成为","Offset":59600000,"Duration":4500000,"PronunciationAssessment":{"AccuracyScore":92.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":59600000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":62000000,"Duration":2100000}],"Phonemes":[{"Phoneme":"cheng 2","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":59600000,"Duration":2300000},{"Phoneme":"wei 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":62000000,"Duration":2100000}]},{"Word":"了","Offset":64200000,"Duration":1700000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":64200000,"Duration":1700000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":64200000,"Duration":1700000}]},{"Word":"难以","Offset":66000000,"Duration":3500000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":66000000,"Duration":2100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":68200000,"Duration":1300000}],"Phonemes":[{"Phoneme":"nan 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":66000000,"Duration":2100000},{"Phoneme":"yi 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":68200000,"Duration":1300000}]},{"Word":"忘记","Offset":69600000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":100.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":69600000,"Duration":3100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":72800000,"Duration":1900000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":69600000,"Duration":3100000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":72800000,"Duration":1900000}]},{"Word":"的","Offset":74800000,"Duration":1900000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":74800000,"Duration":1900000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":74800000,"Duration":1900000}]},{"Word":"美好","Offset":76800000,"Duration":4500000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":76800000,"Duration":4500000}],"Phonemes":[{"Phoneme":"mei 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":76800000,"Duration":2300000},{"Phoneme":"hao 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":79200000,"Duration":2100000}]},{"Word":"的","Offset":81400000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"Insertion"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":81400000,"Duration":1300000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":81400000,"Duration":1300000}]},{"Word":"回忆","Offset":82800000,"Duration":6200000,"PronunciationAssessment":{"AccuracyScore":93.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82800000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":85200000,"Duration":3800000}],"Phonemes":[{"Phoneme":"hui 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82800000,"Duration":2300000},{"Phoneme":"yi 4","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":85200000,"Duration":3800000}]}]}]}'},"complex-sentence":{originalText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",compareText:"尽管吃了不少苦，但是那段时光成为了难以忘记的美好回忆。",srResultJson:'{"Id":"90640a27f88a40e0b38f8b3e52714800","RecognitionStatus":"Success","Offset":18300000,"Duration":71100000,"Channel":0,"DisplayText":"尽管吃了不少苦，但是那段时光成为了难以忘记的美好回忆。","SNR":21.393457,"NBest":[{"Confidence":0.9395084,"Lexical":"尽管 吃 了 不少 苦 但是 那 段 时光 成为 了 难以 忘记 的 美好 回忆","ITN":"尽管 吃 了 不少 苦 但是 那 段 时光 成为 了 难以 忘记 的 美好 回忆","MaskedITN":"尽管吃了不少苦但是那段时光成为了难以忘记的美好回忆","Display":"尽管吃了不少苦，但是那段时光成为了难以忘记的美好回忆。","PronunciationAssessment":{"AccuracyScore":83.0,"FluencyScore":99.0,"CompletenessScore":94.0,"PronScore":88.4},"Words":[{"Word":"尽管","Offset":18300000,"Duration":7800000,"PronunciationAssessment":{"AccuracyScore":74.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":98.0},"Offset":18300000,"Duration":7800000}],"Phonemes":[{"Phoneme":"jin 3","PronunciationAssessment":{"AccuracyScore":58.0},"Offset":18300000,"Duration":4000000},{"Phoneme":"guan 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":22400000,"Duration":3700000}]},{"Word":"吃","Offset":26200000,"Duration":2300000,"PronunciationAssessment":{"AccuracyScore":76.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":76.0},"Offset":26200000,"Duration":2300000}],"Phonemes":[{"Phoneme":"chi 1","PronunciationAssessment":{"AccuracyScore":76.0},"Offset":26200000,"Duration":2300000}]},{"Word":"了","Offset":28600000,"Duration":1500000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":28600000,"Duration":1500000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":28600000,"Duration":1500000}]},{"Word":"不少","Offset":30200000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":67.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":30200000,"Duration":5100000}],"Phonemes":[{"Phoneme":"bu 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":30200000,"Duration":1700000},{"Phoneme":"shao 3","PronunciationAssessment":{"AccuracyScore":50.0},"Offset":32000000,"Duration":3300000}]},{"Word":"苦","Offset":35400000,"Duration":5300000,"PronunciationAssessment":{"AccuracyScore":76.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":76.0},"Offset":35400000,"Duration":5300000}],"Phonemes":[{"Phoneme":"ku 3","PronunciationAssessment":{"AccuracyScore":76.0},"Offset":35400000,"Duration":5300000}]},{"Word":"但是","Offset":41000000,"Duration":5700000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":41000000,"Duration":3900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":45000000,"Duration":1700000}],"Phonemes":[{"Phoneme":"dan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":41000000,"Duration":3900000},{"Phoneme":"shi 4","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":45000000,"Duration":1700000}]},{"Word":"那","Offset":46800000,"Duration":1700000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":46800000,"Duration":1700000}],"Phonemes":[{"Phoneme":"na 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":46800000,"Duration":1700000}]},{"Word":"段","Offset":48600000,"Duration":2700000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":48600000,"Duration":2700000}],"Phonemes":[{"Phoneme":"duan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":48600000,"Duration":2700000}]},{"Word":"时光","Offset":51400000,"Duration":7300000,"PronunciationAssessment":{"AccuracyScore":90.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":82.0},"Offset":51400000,"Duration":2500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":54000000,"Duration":4700000}],"Phonemes":[{"Phoneme":"shi 2","PronunciationAssessment":{"AccuracyScore":82.0},"Offset":51400000,"Duration":2500000},{"Phoneme":"guang 1","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":54000000,"Duration":4700000}]},{"Word":"最终","PronunciationAssessment":{"ErrorType":"Omission"},"Phonemes":[]},{"Word":"成为","Offset":59000000,"Duration":5500000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":59000000,"Duration":3100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":62200000,"Duration":2300000}],"Phonemes":[{"Phoneme":"cheng 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":59000000,"Duration":3100000},{"Phoneme":"wei 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":62200000,"Duration":2300000}]},{"Word":"了","Offset":64600000,"Duration":2100000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":64600000,"Duration":2100000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":64600000,"Duration":2100000}]},{"Word":"难以","Offset":66800000,"Duration":3300000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":66800000,"Duration":2100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":69000000,"Duration":1100000}],"Phonemes":[{"Phoneme":"nan 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":66800000,"Duration":2100000},{"Phoneme":"yi 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":69000000,"Duration":1100000}]},{"Word":"忘记","Offset":70200000,"Duration":4900000,"PronunciationAssessment":{"AccuracyScore":100.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":70200000,"Duration":2900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":73200000,"Duration":1900000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":70200000,"Duration":2900000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":73200000,"Duration":1900000}]},{"Word":"的","Offset":75200000,"Duration":1900000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":75200000,"Duration":1900000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":75200000,"Duration":1900000}]},{"Word":"美好","Offset":77200000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":77200000,"Duration":5100000}],"Phonemes":[{"Phoneme":"mei 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":77200000,"Duration":2300000},{"Phoneme":"hao 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":79600000,"Duration":2700000}]},{"Word":"回忆","Offset":82400000,"Duration":7000000,"PronunciationAssessment":{"AccuracyScore":89.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82400000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":84800000,"Duration":4600000}],"Phonemes":[{"Phoneme":"hui 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":82400000,"Duration":2300000},{"Phoneme":"yi 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":84800000,"Duration":4600000}]}]}]}'},business:{originalText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",compareText:"吃了不少苦，但是那段时光成为了难以忘记的美好回忆。",srResultJson:'{"Id":"83865cf2566f4a3d866637fb97a154bc","RecognitionStatus":"Success","Offset":5500000,"Duration":65300000,"Channel":0,"DisplayText":"吃了不少苦，但是那段时光成为了难以忘记的美好回忆。","SNR":22.070696,"NBest":[{"Confidence":0.95551974,"Lexical":"吃 了 不少 苦 但是 那 段 时光 成为 了 难以 忘记 的 美好 回忆","ITN":"吃 了 不少 苦 但是 那 段 时光 成为 了 难以 忘记 的 美好 回忆","MaskedITN":"吃了不少苦但是那段时光成为了难以忘记的美好回忆","Display":"吃了不少苦，但是那段时光成为了难以忘记的美好回忆。","PronunciationAssessment":{"AccuracyScore":79.0,"FluencyScore":99.0,"CompletenessScore":88.0,"PronScore":84.8},"Words":[{"Word":"尽管","PronunciationAssessment":{"ErrorType":"Omission"},"Phonemes":[]},{"Word":"吃","Offset":5500000,"Duration":4500000,"PronunciationAssessment":{"AccuracyScore":60.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":60.0},"Offset":5500000,"Duration":4500000}],"Phonemes":[{"Phoneme":"chi 1","PronunciationAssessment":{"AccuracyScore":60.0},"Offset":5500000,"Duration":4500000}]},{"Word":"了","Offset":10100000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":10100000,"Duration":1300000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":10100000,"Duration":1300000}]},{"Word":"不少","Offset":11500000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":82.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":11500000,"Duration":5100000}],"Phonemes":[{"Phoneme":"bu 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":11500000,"Duration":1700000},{"Phoneme":"shao 3","PronunciationAssessment":{"AccuracyScore":73.0},"Offset":13300000,"Duration":3300000}]},{"Word":"苦","Offset":16700000,"Duration":5600000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":16700000,"Duration":5600000}],"Phonemes":[{"Phoneme":"ku 3","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":16700000,"Duration":5600000}]},{"Word":"但是","Offset":22600000,"Duration":5600000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":22600000,"Duration":3800000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":26500000,"Duration":1700000}],"Phonemes":[{"Phoneme":"dan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":22600000,"Duration":3800000},{"Phoneme":"shi 4","PronunciationAssessment":{"AccuracyScore":79.0},"Offset":26500000,"Duration":1700000}]},{"Word":"那","Offset":28300000,"Duration":1900000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":28300000,"Duration":1900000}],"Phonemes":[{"Phoneme":"na 4","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":28300000,"Duration":1900000}]},{"Word":"段","Offset":30300000,"Duration":2700000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":30300000,"Duration":2700000}],"Phonemes":[{"Phoneme":"duan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":30300000,"Duration":2700000}]},{"Word":"时光","Offset":33100000,"Duration":7500000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":33100000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":35500000,"Duration":5100000}],"Phonemes":[{"Phoneme":"shi 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":33100000,"Duration":2300000},{"Phoneme":"guang 1","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":35500000,"Duration":5100000}]},{"Word":"最终","PronunciationAssessment":{"ErrorType":"Omission"},"Phonemes":[]},{"Word":"成为","Offset":40900000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":40900000,"Duration":3100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":44100000,"Duration":1900000}],"Phonemes":[{"Phoneme":"cheng 2","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":40900000,"Duration":3100000},{"Phoneme":"wei 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":44100000,"Duration":1900000}]},{"Word":"了","Offset":46100000,"Duration":1700000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":46100000,"Duration":1700000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":46100000,"Duration":1700000}]},{"Word":"难以","Offset":47900000,"Duration":3300000,"PronunciationAssessment":{"AccuracyScore":95.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":47900000,"Duration":1900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":49900000,"Duration":1300000}],"Phonemes":[{"Phoneme":"nan 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":47900000,"Duration":1900000},{"Phoneme":"yi 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":49900000,"Duration":1300000}]},{"Word":"忘记","Offset":51300000,"Duration":5100000,"PronunciationAssessment":{"AccuracyScore":100.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":51300000,"Duration":3100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":54500000,"Duration":1900000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":51300000,"Duration":3100000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":54500000,"Duration":1900000}]},{"Word":"的","Offset":56500000,"Duration":2500000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":56500000,"Duration":2500000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":56500000,"Duration":2500000}]},{"Word":"美好","Offset":59100000,"Duration":4900000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":59100000,"Duration":4900000}],"Phonemes":[{"Phoneme":"mei 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":59100000,"Duration":2500000},{"Phoneme":"hao 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":61700000,"Duration":2300000}]},{"Word":"回忆","Offset":64100000,"Duration":6700000,"PronunciationAssessment":{"AccuracyScore":89.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":64100000,"Duration":2100000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":66300000,"Duration":4500000}],"Phonemes":[{"Phoneme":"hui 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":64100000,"Duration":2100000},{"Phoneme":"yi 4","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":66300000,"Duration":4500000}]}]}]}'},emotion:{originalText:"尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",compareText:"吃了不少苦，那段时光成为了难以忘记的美好回忆。",srResultJson:'{"Id":"2d0d260bbd40470d8633c20290bca73c","RecognitionStatus":"Success","Offset":15200000,"Duration":56200000,"Channel":0,"DisplayText":"吃了不少苦，那段时光成为了难以忘记的美好回忆。","SNR":20.556019,"NBest":[{"Confidence":0.92631185,"Lexical":"吃 了 不少 苦 那 段 时光 成为 了 难以 忘记 的 美好 回忆","ITN":"吃 了 不少 苦 那 段 时光 成为 了 难以 忘记 的 美好 回忆","MaskedITN":"吃了不少苦那段时光成为了难以忘记的美好回忆","Display":"吃了不少苦，那段时光成为了难以忘记的美好回忆。","PronunciationAssessment":{"AccuracyScore":75.0,"FluencyScore":96.0,"CompletenessScore":82.0,"PronScore":80.6},"Words":[{"Word":"尽管","PronunciationAssessment":{"ErrorType":"Omission"},"Phonemes":[]},{"Word":"吃","Offset":15200000,"Duration":3200000,"PronunciationAssessment":{"AccuracyScore":76.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":76.0},"Offset":15200000,"Duration":3200000}],"Phonemes":[{"Phoneme":"chi 1","PronunciationAssessment":{"AccuracyScore":76.0},"Offset":15200000,"Duration":3200000}]},{"Word":"了","Offset":18500000,"Duration":1300000,"PronunciationAssessment":{"AccuracyScore":85.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":18500000,"Duration":1300000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":85.0},"Offset":18500000,"Duration":1300000}]},{"Word":"不少","Offset":19900000,"Duration":5300000,"PronunciationAssessment":{"AccuracyScore":82.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":99.0},"Offset":19900000,"Duration":5300000}],"Phonemes":[{"Phoneme":"bu 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":19900000,"Duration":1700000},{"Phoneme":"shao 3","PronunciationAssessment":{"AccuracyScore":73.0},"Offset":21700000,"Duration":3500000}]},{"Word":"苦","Offset":25300000,"Duration":4600000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":25300000,"Duration":4600000}],"Phonemes":[{"Phoneme":"ku 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":25300000,"Duration":4600000}]},{"Word":"但是","PronunciationAssessment":{"ErrorType":"Omission"},"Phonemes":[]},{"Word":"那","Offset":32200000,"Duration":2600000,"PronunciationAssessment":{"AccuracyScore":88.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":32200000,"Duration":2600000}],"Phonemes":[{"Phoneme":"na 4","PronunciationAssessment":{"AccuracyScore":88.0},"Offset":32200000,"Duration":2600000}]},{"Word":"段","Offset":34900000,"Duration":2500000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":34900000,"Duration":2500000}],"Phonemes":[{"Phoneme":"duan 4","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":34900000,"Duration":2500000}]},{"Word":"时光","Offset":37500000,"Duration":6300000,"PronunciationAssessment":{"AccuracyScore":99.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":37500000,"Duration":2500000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":40100000,"Duration":3700000}],"Phonemes":[{"Phoneme":"shi 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":37500000,"Duration":2500000},{"Phoneme":"guang 1","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":40100000,"Duration":3700000}]},{"Word":"最终","PronunciationAssessment":{"ErrorType":"Omission"},"Phonemes":[]},{"Word":"成为","Offset":43900000,"Duration":4700000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":43900000,"Duration":2700000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":46700000,"Duration":1900000}],"Phonemes":[{"Phoneme":"cheng 2","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":43900000,"Duration":2700000},{"Phoneme":"wei 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":46700000,"Duration":1900000}]},{"Word":"了","Offset":48700000,"Duration":1500000,"PronunciationAssessment":{"AccuracyScore":91.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":48700000,"Duration":1500000}],"Phonemes":[{"Phoneme":"le 5","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":48700000,"Duration":1500000}]},{"Word":"难以","Offset":50300000,"Duration":3100000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":50300000,"Duration":1900000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":52300000,"Duration":1100000}],"Phonemes":[{"Phoneme":"nan 2","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":50300000,"Duration":1900000},{"Phoneme":"yi 3","PronunciationAssessment":{"AccuracyScore":94.0},"Offset":52300000,"Duration":1100000}]},{"Word":"忘记","Offset":53500000,"Duration":4900000,"PronunciationAssessment":{"AccuracyScore":100.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":53500000,"Duration":2700000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":56300000,"Duration":2100000}],"Phonemes":[{"Phoneme":"wang 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":53500000,"Duration":2700000},{"Phoneme":"ji 4","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":56300000,"Duration":2100000}]},{"Word":"的","Offset":58500000,"Duration":1700000,"PronunciationAssessment":{"AccuracyScore":97.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":58500000,"Duration":1700000}],"Phonemes":[{"Phoneme":"de 5","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":58500000,"Duration":1700000}]},{"Word":"美好","Offset":60300000,"Duration":4900000,"PronunciationAssessment":{"AccuracyScore":94.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":100.0},"Offset":60300000,"Duration":4900000}],"Phonemes":[{"Phoneme":"mei 3","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":60300000,"Duration":2500000},{"Phoneme":"hao 3","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":62900000,"Duration":2300000}]},{"Word":"回忆","Offset":65300000,"Duration":6100000,"PronunciationAssessment":{"AccuracyScore":93.0,"ErrorType":"None"},"Syllables":[{"Syllable":"","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":65300000,"Duration":2300000},{"Syllable":"","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":67700000,"Duration":3700000}],"Phonemes":[{"Phoneme":"hui 2","PronunciationAssessment":{"AccuracyScore":97.0},"Offset":65300000,"Duration":2300000},{"Phoneme":"yi 4","PronunciationAssessment":{"AccuracyScore":91.0},"Offset":67700000,"Duration":3700000}]}]}]}'}},Fn={greeting:"기본적인 인사말 비교 - 완벽한 발음과의 비교를 통한 정확도 측정","pronunciation-error":"발음 오류 케이스 - 특정 단어의 발음 오류를 감지하고 분석",omission:"단어 생략 케이스 - 문장에서 생략된 단어를 감지하고 분석",insertion:"단어 삽입 케이스 - 불필요하게 삽입된 단어를 감지하고 분석","complex-sentence":"복잡한 문장 비교 - 긴 문장의 발음 품질과 정확도 평가",business:"비즈니스 용어 비교 - 전문적인 용어의 발음 정확도 평가",emotion:"감정 표현 비교 - 감정이 담긴 발음의 품질과 자연스러움 평가"};function Kn(){if(_n.value&&Qn[_n.value]){const e=Qn[_n.value];s.value=e.originalText,bn.value=e.compareText,Cn.value=e.srResultJson,console.log(`케이스 "${_n.value}" 로드 완료`)}}async function Jn(){if(s.value&&bn.value)try{await Xn.initialize();const n=await Xn.tokenize(s.value),o=await Xn.tokenize(bn.value);console.log("원문 토큰화 결과:",n),console.log("비교 문장 토큰화 결과:",o);let a=null;if(console.log("🔍 srResultJson.value 확인:",Cn.value),console.log("🔍 srResultJson.value 타입:",typeof Cn.value),console.log("🔍 srResultJson.value 길이:",Cn.value?.length),Cn.value&&Cn.value.trim())try{a=JSON.parse(Cn.value),console.log("✅ SR API 결과 JSON 로드 완료:",a)}catch(e){return console.warn("❌ SR API 결과 JSON 파싱 실패:",e),void alert("SR API 결과 JSON 형식이 올바르지 않습니다. JSON 형식을 확인해주세요.")}else console.log("⚠️ SR API 결과 JSON이 입력되지 않았습니다. 텍스트 비교만 수행합니다.");kn.value=await Bn.analyzeChineseDifferencesWithSR(s.value,bn.value,a,Dn.value),kn.value.originalWords=n,kn.value.compareWords=o,a&&(kn.value.srResult=a,console.log("✅ srResult를 analysis에 직접 설정:",a)),console.log("🔍 발음 오류 추출 조건 확인:"),console.log("📊 analysis.value.srResult:",kn.value.srResult),console.log("📊 analysis.value.srResult?.NBest:",kn.value.srResult?.NBest),console.log("📊 analysis.value.srResult?.NBest?.[0]:",kn.value.srResult?.NBest?.[0]),console.log("📊 analysis.value.srResult?.NBest?.[0]?.Words:",kn.value.srResult?.NBest?.[0]?.Words),console.log("📊 analysis.value.srResult?.NBest?.[0]?.words:",kn.value.srResult?.NBest?.[0]?.words);const t=kn.value.srResult?.NBest?.[0]?.Words||kn.value.srResult?.NBest?.[0]?.words;console.log("🔍 wordsData 찾기:"),console.log("📊 analysis.value.srResult?.NBest?.[0]?.Words:",kn.value.srResult?.NBest?.[0]?.Words),console.log("📊 analysis.value.srResult?.NBest?.[0]?.words:",kn.value.srResult?.NBest?.[0]?.words),console.log("📊 최종 wordsData:",t),kn.value.srResult&&kn.value.srResult.NBest&&t?(On.value=Yn(t,Dn.value),kn.value.pronunciationAnalysis||(kn.value.pronunciationAnalysis={}),kn.value.pronunciationAnalysis.pronunciationErrors=On.value,kn.value.pronunciationAnalysis.threshold=Dn.value,kn.value.pronunciationAnalysis.pronunciationStats={mispronouncedWords:On.value.length,averageAccuracy:On.value.length>0?On.value.reduce((e,n)=>e+n.accuracyScore,0)/On.value.length:100,overallScore:On.value.length>0?Math.max(0,100-5*On.value.length):100},console.log("SR Words 기반 발음 오류 추출 완료:",On.value),console.log("📊 설정된 발음 오류 데이터:",kn.value.pronunciationAnalysis.pronunciationErrors),console.log("📊 설정된 발음 통계:",kn.value.pronunciationAnalysis.pronunciationStats)):kn.value.pronunciationAnalysis&&kn.value.pronunciationAnalysis.hasData?(On.value=kn.value.pronunciationAnalysis.pronunciationErrors,kn.value.pronunciationAnalysis||(kn.value.pronunciationAnalysis={}),kn.value.pronunciationAnalysis.pronunciationErrors=On.value,kn.value.pronunciationAnalysis.pronunciationStats||(kn.value.pronunciationAnalysis.threshold=Dn.value,kn.value.pronunciationAnalysis.pronunciationStats={mispronouncedWords:On.value.length,averageAccuracy:On.value.length>0?On.value.reduce((e,n)=>e+n.accuracyScore,0)/On.value.length:100,overallScore:On.value.length>0?Math.max(0,100-5*On.value.length):100}),console.log("라이브러리에서 발음 오류 추출 완료:",On.value),console.log("발음 통계:",kn.value.pronunciationAnalysis.pronunciationStats)):(On.value=[],kn.value.pronunciationAnalysis||(kn.value.pronunciationAnalysis={}),kn.value.pronunciationAnalysis.pronunciationErrors=[],kn.value.pronunciationAnalysis.threshold=Dn.value,kn.value.pronunciationAnalysis.pronunciationStats={mispronouncedWords:0,averageAccuracy:100,overallScore:100},console.log("발음 평가 데이터가 없습니다.")),kn.value.srResult&&(console.log("🎯 SR API 전체 데이터:",kn.value.srResult),console.log("📝 DisplayText:",kn.value.srResult.DisplayText),console.log("🎯 NBest[0]:",kn.value.srResult.NBest?.[0]),console.log("🔊 PronunciationAssessment:",kn.value.srResult.NBest?.[0]?.PronunciationAssessment),console.log("📊 Words:",kn.value.srResult.NBest?.[0]?.Words),console.log("🆔 ID:",kn.value.srResult.Id),console.log("📡 SNR:",kn.value.srResult.SNR),console.log("⏱️ Duration:",kn.value.srResult.Duration),console.log("📍 Offset:",kn.value.srResult.Offset),console.log("📺 Channel:",kn.value.srResult.Channel)),console.log("분석 결과:",kn.value)}catch(e){console.error("분석 중 오류 발생:",e),kn.value=null}}async function Un(){if(s.value&&bn.value)try{console.log("🔍 diff-match-patch 비교 시작"),console.log("원문:",s.value),console.log("비교문:",bn.value),console.log("🔍 TextComparator 확인:"),console.log("- TextComparator:",Ln);const e=Ln.compareTexts(s.value,bn.value);Tn.value=e,console.log("🔍 structuredDiffs 기반 HTML 생성:"),console.log("- result.structuredDiffs:",e.structuredDiffs);const n=jn(e.structuredDiffs);if(Rn.value=n,kn.value&&kn.value.srResult){console.log("🔍 발음 오류 분석 시작");const n=Ln.extractMispronunciations(e.structuredDiffs,kn.value.srResult);En.value=n,console.log("📊 추출된 발음 오류:",n),n.length>0?(Wn.value=Ln.mispronunciationsToHtml(n,{showConfidence:!0,showPosition:!0,showDuration:!0,cssClass:"mispronunciation-item",errorClass:"pronunciation-error",confidenceClass:"confidence-score"}),wn.value=!0,console.log("✅ 발음 오류 발견 - 배지 표시 활성화")):(Wn.value="",wn.value=!1,console.log("✅ 발음 오류 없음 - 배지 표시 비활성화"))}else console.log("⚠️ SR 결과가 없어서 발음 오류 분석을 건너뜁니다."),wn.value=!1;console.log("✅ diff 비교 완료:",e),console.log("📊 통계:",e.analysis.statistics),console.log("🔍 디버그 정보:"),console.log("- 원본 텍스트:",e.originalText),console.log("- 비교 텍스트:",e.comparedText),console.log("- 처리된 원본:",e.processedOriginal),console.log("- 처리된 비교:",e.processedCompared),console.log("- 삽입된 텍스트:",e.analysis.changes.insertionText),console.log("- 삭제된 텍스트:",e.analysis.changes.deletionText),console.log("- visualDiffs 존재 여부:",!!e.visualDiffs),e.visualDiffs?(console.log("- 시각적 diffs:",e.visualDiffs),console.log("- 시각적 HTML:",Ln.diffsToHtml(e.visualDiffs))):console.log("- visualDiffs가 없습니다!"),console.log("- 분석용 diffs:",e.diffs),console.log("- 분석용 HTML:",Ln.diffsToHtml(e.diffs))}catch(e){console.error("❌ diff 비교 중 오류 발생:",e),alert("텍스트 비교 중 오류가 발생했습니다: "+e.message)}else alert("원문과 비교 문장을 모두 입력해주세요.")}function Hn(){Tn.value=null,Rn.value="",En.value=[],Wn.value="",wn.value=!1,console.log("🧹 diff 결과 초기화 완료")}function Vn(){console.log("🧪 발음 오류 분석 테스트 시작");const e=[{type:"common",value:"尽管",operation:0},{type:"removed",value:"吃了",operation:-1},{type:"added",value:"吃",operation:1},{type:"common",value:"不少苦",operation:0},{type:"moved",value:"但是",operation:2},{type:"common",value:"那段时光最终成为了难以忘记的美好回忆",operation:0}],n={nbest:[{words:[{word:"尽管",pronunciationAssessment:{errorType:"None",confidence:.95}},{word:"吃",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.65}},{word:"不少苦",pronunciationAssessment:{errorType:"None",confidence:.88}},{word:"但是",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.72}},{word:"那段时光",pronunciationAssessment:{errorType:"None",confidence:.91}}]}]},s=Ln.extractMispronunciations(e,n);console.log("📊 테스트 결과 - 추출된 발음 오류:",s),En.value=s,kn.value||(kn.value={srResult:n}),s.length>0?(Wn.value=Ln.mispronunciationsToHtml(s,{showConfidence:!0,showPosition:!0,showDuration:!0,cssClass:"mispronunciation-item",errorClass:"pronunciation-error",confidenceClass:"confidence-score"}),wn.value=!0,console.log("✅ 발음 오류 분석 테스트 완료 - 오류 발견")):(Wn.value="",wn.value=!1,console.log("✅ 발음 오류 분석 테스트 완료 - 오류 없음"))}function qn(){console.log("🧪 다양한 발음 오류 시나리오 테스트 시작");const e={structuredDiffs:[{type:"common",value:"你好",operation:0},{type:"added",value:"世界",operation:1},{type:"common",value:"今天",operation:0},{type:"removed",value:"天气",operation:-1},{type:"moved",value:"很好",operation:2}],srResult:{nbest:[{words:[{word:"你好",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.45},offset:0,duration:500},{word:"世界",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.32},offset:500,duration:400},{word:"今天",pronunciationAssessment:{errorType:"None",confidence:.92},offset:900,duration:300},{word:"很好",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.58},offset:1200,duration:350}]}]}},n={structuredDiffs:[{type:"common",value:"我",operation:0},{type:"added",value:"喜欢",operation:1},{type:"common",value:"学习",operation:0},{type:"removed",value:"中文",operation:-1},{type:"added",value:"汉语",operation:1}],srResult:{nbest:[{words:[{word:"我",pronunciationAssessment:{errorType:"None",confidence:.88},offset:0,duration:200},{word:"喜欢",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.41},offset:200,duration:400},{word:"学习",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.67},offset:600,duration:500},{word:"汉语",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.23},offset:1100,duration:300}]}]}},s={structuredDiffs:[{type:"common",value:"这个",operation:0},{type:"moved",value:"问题",operation:2},{type:"common",value:"很",operation:0},{type:"added",value:"难",operation:1},{type:"common",value:"解决",operation:0}],srResult:{nbest:[{words:[{word:"这个",pronunciationAssessment:{errorType:"None",confidence:.95},offset:0,duration:300},{word:"问题",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.38},offset:300,duration:400},{word:"很",pronunciationAssessment:{errorType:"None",confidence:.87},offset:700,duration:150},{word:"难",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.52},offset:850,duration:200},{word:"解决",pronunciationAssessment:{errorType:"Mispronunciation",confidence:.61},offset:1050,duration:450}]}]}},o=[e,n,s],a=[];o.forEach((e,n)=>{console.log(`📋 시나리오 ${n+1} 테스트 중...`);const s=Ln.extractMispronunciations(e.structuredDiffs,e.srResult);console.log(`시나리오 ${n+1} 결과:`,s),a.push(...s)}),En.value=a,console.log("📊 전체 시나리오 결과:",a),kn.value||(kn.value={srResult:{nbest:[{words:[...e.srResult.nbest[0].words,...n.srResult.nbest[0].words,...s.srResult.nbest[0].words]}]}}),a.length>0?(Wn.value=Ln.mispronunciationsToHtml(a,{showConfidence:!0,showPosition:!0,showDuration:!0,cssClass:"mispronunciation-item-scenario",errorClass:"pronunciation-error-scenario",confidenceClass:"confidence-score-scenario"}),wn.value=!0,console.log("✅ 다양한 시나리오 테스트 완료 - 총 오류 수:",a.length)):(Wn.value="",wn.value=!1,console.log("✅ 다양한 시나리오 테스트 완료 - 오류 없음"))}function Gn(){if(console.log("📊 발음 오류 통계 분석 시작"),!En.value||0===En.value.length)return void console.log("❌ 분석할 발음 오류 데이터가 없습니다.");const e={totalErrors:En.value.length,averageConfidence:0,confidenceDistribution:{high:0,medium:0,low:0,veryLow:0},errorTypes:{},wordFrequency:{}};let n=0;En.value.forEach(s=>{n+=s.confidence,s.confidence>=.8?e.confidenceDistribution.high++:s.confidence>=.6?e.confidenceDistribution.medium++:s.confidence>=.4?e.confidenceDistribution.low++:e.confidenceDistribution.veryLow++;const o=s.errorType||"Unknown";e.errorTypes[o]=(e.errorTypes[o]||0)+1;const a=s.word||"Unknown";e.wordFrequency[a]=(e.wordFrequency[a]||0)+1}),e.averageConfidence=n/e.totalErrors,console.log("📊 발음 오류 통계:",e);const s=`\n    <div class="mispronunciation-stats">\n      <h3>📊 발음 오류 상세 통계</h3>\n      <div class="stats-container">\n        <div class="stat-card">\n          <h4>기본 정보</h4>\n          <p>총 오류 수: <strong>${e.totalErrors}</strong></p>\n          <p>평균 신뢰도: <strong>${(100*e.averageConfidence).toFixed(1)}%</strong></p>\n        </div>\n        <div class="stat-card">\n          <h4>신뢰도 분포</h4>\n          <p>높음 (80%+): <strong>${e.confidenceDistribution.high}</strong></p>\n          <p>보통 (60-79%): <strong>${e.confidenceDistribution.medium}</strong></p>\n          <p>낮음 (40-59%): <strong>${e.confidenceDistribution.low}</strong></p>\n          <p>매우 낮음 (<40%): <strong>${e.confidenceDistribution.veryLow}</strong></p>\n        </div>\n        <div class="stat-card">\n          <h4>오류 타입별 분포</h4>\n          ${Object.entries(e.errorTypes).map(([e,n])=>`<p>${e}: <strong>${n}</strong></p>`).join("")}\n        </div>\n        <div class="stat-card">\n          <h4>가장 많이 틀린 단어</h4>\n          ${Object.entries(e.wordFrequency).sort(([,e],[,n])=>n-e).slice(0,5).map(([e,n])=>`<p>${e}: <strong>${n}</strong>회</p>`).join("")}\n        </div>\n      </div>\n    </div>\n  `;return Wn.value&&(Wn.value+=s),e}function Yn(e,n){console.log("🔍 extractPronunciationErrorChars 호출됨"),console.log("📊 srWords:",e),console.log("🎯 threshold:",n),console.log("📊 srWords 타입:",typeof e),console.log("📊 srWords 길이:",e?.length),console.log("📊 srWords 배열인가?",Array.isArray(e));const s=[];return Array.isArray(e)?(e.forEach((e,o)=>{console.log(`📝 단어 ${o}:`,e),console.log(`📝 단어 ${o} 타입:`,typeof e),console.log(`📝 단어 ${o} 키들:`,Object.keys(e||{})),console.log(`📝 단어 ${o} word 필드:`,e.word),console.log(`📝 단어 ${o} Word 필드:`,e.Word);const a=e.pronunciationAssessment||e.PronunciationAssessment;if(console.log("🎯 pronunciationAssessment:",a),a){const t=a.accuracyScore||a.AccuracyScore;console.log(`📊 accuracyScore: ${t}, 임계값: ${n}`),null!==t&&t<n?(console.log(`❌ 발음 오류 발견: ${e.word||e.Word} (${t}점)`),s.push({word:e.word||e.Word,wordIndex:o,accuracyScore:t,errorType:a.errorType||a.ErrorType||"None"})):null===t?(console.log(`⚠️ accuracyScore가 null인 단어: ${e.word||e.Word} (${a.errorType||a.ErrorType})`),(a.errorType||a.ErrorType)&&s.push({word:e.word||e.Word,wordIndex:o,accuracyScore:0,errorType:a.errorType||a.ErrorType})):console.log(`✅ 정상: ${e.word||e.Word} (${t}점)`)}else console.log(`⚠️ pronunciationAssessment 없음: ${e.word||e.Word}`)}),console.log("🎯 최종 발음 오류 단어들:",s),s):(console.log("❌ srWords가 배열이 아닙니다:",e),s)}function Zn(){console.log("🔄 발음 임계값 변경됨:",Dn.value);const e=kn.value?.srResult?.NBest?.[0]?.Words||kn.value?.srResult?.NBest?.[0]?.words;console.log("🔄 updatePronunciationErrors에서 wordsData 찾기:"),console.log("📊 analysis.value?.srResult?.NBest?.[0]?.Words:",kn.value?.srResult?.NBest?.[0]?.Words),console.log("📊 analysis.value?.srResult?.NBest?.[0]?.words:",kn.value?.srResult?.NBest?.[0]?.words),console.log("📊 최종 wordsData:",e),e?(On.value=Yn(e,Dn.value),kn.value.pronunciationAnalysis&&(kn.value.pronunciationAnalysis.pronunciationErrors=On.value,kn.value.pronunciationAnalysis.threshold=Dn.value,kn.value.pronunciationAnalysis.pronunciationStats={mispronouncedWords:On.value.length,averageAccuracy:On.value.length>0?On.value.reduce((e,n)=>e+n.accuracyScore,0)/On.value.length:100,overallScore:On.value.length>0?Math.max(0,100-5*On.value.length):100}),console.log("✅ 발음 임계값 변경으로 인한 발음 오류 재계산 완료:",On.value),console.log("📊 업데이트된 발음 통계:",kn.value.pronunciationAnalysis?.pronunciationStats)):console.log("⚠️ SR Words 데이터가 없어 발음 오류 재계산을 할 수 없습니다.")}function es(e,n){if(!kn.value)return"";if("original"===n){if(kn.value.errors&&kn.value.errors.includes(e))return"error";if(kn.value.omissions&&kn.value.omissions.includes(e))return"omission"}else if("compare"===n&&kn.value.insertions&&kn.value.insertions.includes(e))return"insertion";return""}function ns(e,n){if(!kn.value||!On.value.length)return"";const s=On.value.some(e=>e.wordIndex===n);return s?"pronunciation-error-word":""}function ss(e,n){if(!kn.value||!On.value.length)return"N/A";const s=On.value.find(e=>e.wordIndex===n);return s?s.accuracyScore.toFixed(1):"N/A"}async function os(){xn.value=!0;try{const e=await fetch("/SrResut.json");if(e.ok){const n=await e.json();Cn.value=JSON.stringify(n,null,2),console.log("SrResult.json 파일 로드 완료:",n);const s=n.NBest?.[0]?.Words?.length||0,o=n.DisplayText||n.NBest?.[0]?.Display||"N/A";alert(`SrResult.json 파일 로드 완료!\n\n인식된 텍스트: ${o}\n단어 수: ${s}개`)}else console.warn("SrResult.json 파일을 읽을 수 없습니다."),as(),alert("SrResult.json 파일을 읽을 수 없어 기본 샘플 데이터를 로드했습니다.")}catch(e){console.warn("SrResult.json 파일 로드 실패:",e),as(),alert("SrResult.json 파일 로드에 실패하여 기본 샘플 데이터를 로드했습니다.")}finally{xn.value=!1}}function as(){Cn.value='{\n  "RecognitionStatus": "Success",\n  "DisplayText": "你好世界",\n  "NBest": [\n    {\n      "Confidence": 0.95,\n      "Lexical": "你好世界",\n      "ITN": "你好世界",\n      "MaskedITN": "你好世界",\n      "Display": "你好世界",\n      "Words": [\n        {\n          "Word": "你",\n          "Offset": 0,\n          "Duration": 5000000,\n          "PronunciationAssessment": {\n            "AccuracyScore": 90,\n            "ErrorType": "None"\n          }\n        },\n        {\n          "Word": "好",\n          "Offset": 5000000,\n          "Duration": 4000000,\n          "PronunciationAssessment": {\n            "AccuracyScore": 75,\n            "ErrorType": "Mispronunciation"\n          }\n        },\n        {\n          "Word": "世界",\n          "Offset": 9000000,\n          "Duration": 6000000,\n          "PronunciationAssessment": {\n            "AccuracyScore": 85,\n            "ErrorType": "None"\n          }\n        }\n      ],\n      "PronunciationAssessment": {\n        "AccuracyScore": 83.3,\n        "FluencyScore": 85.0,\n        "CompletenessScore": 90.0,\n        "PronScore": 86.1\n      }\n    }\n  ],\n  "Duration": 15000000,\n  "Offset": 0,\n  "SNR": 25.5\n}',console.log("기본 샘플 SR API 결과 JSON 로드 완료.")}function ts(){_n.value="",s.value="",bn.value="",Cn.value="",kn.value=null,On.value=[],console.log("케이스가 초기화되었습니다.")}return(e,n)=>((0,a.uX)(),(0,a.CE)("div",i,[n[63]||(n[63]=(0,a.Lk)("h1",null,"중국어 문장 비교 분석",-1)),In.value?((0,a.uX)(),(0,a.CE)("div",u,[n[6]||(n[6]=(0,a.Lk)("p",null,"✅ 업로드 결과에서 자동으로 데이터가 입력되었습니다.",-1)),(0,a.Lk)("button",{onClick:zn,class:"clear-auto-fill-btn"}," 자동 입력 데이터 초기화 ")])):(0,a.Q3)("",!0),(0,a.Lk)("div",f,[(0,a.Lk)("div",null,[n[8]||(n[8]=(0,a.Lk)("label",null,"분석 케이스 선택:",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>_n.value=e),onChange:Kn,class:"case-dropdown"},n[7]||(n[7]=[(0,a.Fv)('<option value="" data-v-3e6aea6e>직접 입력</option><option value="greeting" data-v-3e6aea6e>1. 삽입 생략 없음</option><option value="pronunciation-error" data-v-3e6aea6e>2. 삽입 1단어</option><option value="omission" data-v-3e6aea6e>3. 삽입 2단어</option><option value="insertion" data-v-3e6aea6e>4. 삽입 3단어</option><option value="complex-sentence" data-v-3e6aea6e>5. 생략 1단어</option><option value="business" data-v-3e6aea6e>6. 생략 2단어</option><option value="emotion" data-v-3e6aea6e>7. 생략 3단어</option>',8)]),544),[[o.u1,_n.value]])]),(0,a.Lk)("div",y,[_n.value?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:Jn,class:"auto-analyze-btn",disabled:!s.value||!bn.value}," 즉시 분석 ",8,d)):(0,a.Q3)("",!0),_n.value?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:ts,class:"clear-case-btn"}," 케이스 초기화 ")):(0,a.Q3)("",!0)]),_n.value&&Fn[_n.value]?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("p",null,(0,t.v_)(Fn[_n.value]),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",v,[n[38]||(n[38]=(0,a.Lk)("h3",null,"📝 텍스트 차이점 분석 (diff-match-patch)",-1)),(0,a.Lk)("div",A,[(0,a.Lk)("div",p,[(0,a.Lk)("label",S,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>Nn.value=e),id:"enableMoveDetection"},null,512),[[o.lH,Nn.value]]),n[9]||(n[9]=(0,a.Lk)("span",null,"이동 감지 (텍스트 위치 변경 감지)",-1))])]),(0,a.Lk)("div",P,[(0,a.Lk)("button",{onClick:Un,disabled:!s.value||!bn.value,class:"diff-analyze-btn"}," 차이점 분석 실행 ",8,h),(0,a.Lk)("button",{onClick:Vn,class:"test-btn"}," 🎯 발음 오류 분석 테스트 "),(0,a.Lk)("button",{onClick:qn,class:"test-scenario-btn"}," 📋 다양한 시나리오 테스트 "),(0,a.Lk)("button",{onClick:Gn,class:"analyze-btn"}," 📊 통계 분석 "),(0,a.Lk)("button",{onClick:Hn,class:"clear-diff-btn"}," 결과 초기화 ")])]),Tn.value?((0,a.uX)(),(0,a.CE)("div",g,[(0,a.Lk)("div",b,[(0,a.Lk)("h4",null,[n[10]||(n[10]=(0,a.eW)(" 📊 비교 통계 ")),wn.value?((0,a.uX)(),(0,a.CE)("span",k," 🎯 발음 오류 ")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",D,[(0,a.Lk)("div",O,[n[11]||(n[11]=(0,a.Lk)("span",{class:"stat-label"},"유사도:",-1)),(0,a.Lk)("span",L,(0,t.v_)(Tn.value.analysis.statistics.similarity)+"%",1)]),(0,a.Lk)("div",T,[n[12]||(n[12]=(0,a.Lk)("span",{class:"stat-label"},"정확도:",-1)),(0,a.Lk)("span",R,(0,t.v_)(Tn.value.analysis.statistics.accuracy)+"%",1)]),(0,a.Lk)("div",N,[n[13]||(n[13]=(0,a.Lk)("span",{class:"stat-label"},"삽입:",-1)),(0,a.Lk)("span",E,(0,t.v_)(Tn.value.analysis.statistics.insertions)+"자",1)]),(0,a.Lk)("div",W,[n[14]||(n[14]=(0,a.Lk)("span",{class:"stat-label"},"삭제:",-1)),(0,a.Lk)("span",w,(0,t.v_)(Tn.value.analysis.statistics.deletions)+"자",1)]),(0,a.Lk)("div",C,[n[15]||(n[15]=(0,a.Lk)("span",{class:"stat-label"},"수정:",-1)),(0,a.Lk)("span",x,(0,t.v_)(Tn.value.analysis.statistics.modifications)+"개",1)]),(0,a.Lk)("div",_,[n[16]||(n[16]=(0,a.Lk)("span",{class:"stat-label"},"변경율:",-1)),(0,a.Lk)("span",I,(0,t.v_)(Tn.value.analysis.summary.changePercentage)+"%",1)]),wn.value?((0,a.uX)(),(0,a.CE)("div",B,[n[17]||(n[17]=(0,a.Lk)("span",{class:"stat-label"},"발음 오류:",-1)),(0,a.Lk)("span",X,(0,t.v_)(En.value.length)+"개",1)])):(0,a.Q3)("",!0),wn.value?((0,a.uX)(),(0,a.CE)("div",$,[n[18]||(n[18]=(0,a.Lk)("span",{class:"stat-label"},"발음 정확도:",-1)),(0,a.Lk)("span",j,(0,t.v_)(En.value.length>0?Math.round(100*(1-En.value.reduce((e,n)=>e+n.confidence,0)/En.value.length)):100)+"%",1)])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",M,[n[25]||(n[25]=(0,a.Lk)("h4",null,"🔍 시각적 차이점 표시",-1)),Nn.value?((0,a.uX)(),(0,a.CE)("div",z,[n[24]||(n[24]=(0,a.Fv)('<p data-v-3e6aea6e>🔄 이동 감지가 활성화되었습니다.</p><div class="move-legend" data-v-3e6aea6e><div class="legend-item" data-v-3e6aea6e><span class="legend-move" data-v-3e6aea6e>이동됨</span> - 노란색 점선 테두리 </div><div class="legend-item" data-v-3e6aea6e><span class="legend-move-from" data-v-3e6aea6e>이동 원본</span> - 연한 빨간색 취소선 </div><div class="legend-item" data-v-3e6aea6e><span class="legend-insert" data-v-3e6aea6e>추가됨</span> - 연한 초록색 배경 </div><div class="legend-item" data-v-3e6aea6e><span class="legend-delete" data-v-3e6aea6e>삭제됨</span> - 연한 빨간색 취소선 </div></div>',2)),(0,a.Lk)("details",null,[n[23]||(n[23]=(0,a.Lk)("summary",null,"처리된 텍스트 보기",-1)),(0,a.Lk)("div",Q,[(0,a.Lk)("div",F,[n[19]||(n[19]=(0,a.Lk)("strong",null,"원본 텍스트:",-1)),(0,a.eW)(" "+(0,t.v_)(Tn.value.originalText),1)]),(0,a.Lk)("div",K,[n[20]||(n[20]=(0,a.Lk)("strong",null,"비교 텍스트:",-1)),(0,a.eW)(" "+(0,t.v_)(Tn.value.comparedText),1)]),(0,a.Lk)("div",J,[n[21]||(n[21]=(0,a.Lk)("strong",null,"처리된 원문:",-1)),(0,a.eW)(" "+(0,t.v_)(Tn.value.processedOriginal),1)]),(0,a.Lk)("div",U,[n[22]||(n[22]=(0,a.Lk)("strong",null,"처리된 비교문:",-1)),(0,a.eW)(" "+(0,t.v_)(Tn.value.processedCompared),1)])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"diff-display",innerHTML:Rn.value},null,8,H)]),wn.value?((0,a.uX)(),(0,a.CE)("div",V,[n[30]||(n[30]=(0,a.Lk)("h4",null,"🎯 발음 오류 분석",-1)),(0,a.Lk)("div",q,[(0,a.Lk)("div",{class:"pronunciation-errors-list",innerHTML:Wn.value},null,8,G),(0,a.Lk)("div",Y,[n[29]||(n[29]=(0,a.Lk)("h5",null,"📊 발음 오류 요약",-1)),(0,a.Lk)("div",Z,[(0,a.Lk)("div",ee,[n[26]||(n[26]=(0,a.Lk)("span",{class:"mini-label"},"총 오류:",-1)),(0,a.Lk)("span",ne,(0,t.v_)(En.value.length)+"개",1)]),(0,a.Lk)("div",se,[n[27]||(n[27]=(0,a.Lk)("span",{class:"mini-label"},"평균 정확도:",-1)),(0,a.Lk)("span",oe,(0,t.v_)(En.value.length>0?Math.round(100*(1-En.value.reduce((e,n)=>e+n.confidence,0)/En.value.length)):100)+"% ",1)]),(0,a.Lk)("div",ae,[n[28]||(n[28]=(0,a.Lk)("span",{class:"mini-label"},"가장 낮은 신뢰도:",-1)),(0,a.Lk)("span",te,(0,t.v_)(En.value.length>0?Math.round(100*(1-Math.max(...En.value.map(e=>e.confidence)))):0)+"% ",1)])])])])])):(0,a.Q3)("",!0),Tn.value.analysis.changes.insertionText||Tn.value.analysis.changes.deletionText?((0,a.uX)(),(0,a.CE)("div",re,[n[35]||(n[35]=(0,a.Lk)("h4",null,"📋 상세 변경 사항",-1)),Tn.value.analysis.changes.insertionText?((0,a.uX)(),(0,a.CE)("div",ce,[n[31]||(n[31]=(0,a.Lk)("h5",null,"➕ 삽입된 텍스트:",-1)),(0,a.Lk)("div",le,(0,t.v_)(Tn.value.analysis.changes.insertionText),1)])):(0,a.Q3)("",!0),Tn.value.analysis.changes.deletionText?((0,a.uX)(),(0,a.CE)("div",ie,[n[32]||(n[32]=(0,a.Lk)("h5",null,"➖ 삭제된 텍스트:",-1)),(0,a.Lk)("div",ue,(0,t.v_)(Tn.value.analysis.changes.deletionText),1)])):(0,a.Q3)("",!0),Tn.value.analysis.changes.modificationDetails.length>0?((0,a.uX)(),(0,a.CE)("div",fe,[n[34]||(n[34]=(0,a.Lk)("h5",null,"🔄 수정된 부분:",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(Tn.value.analysis.changes.modificationDetails,(e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"modification-item"},[(0,a.Lk)("div",ye,"위치: "+(0,t.v_)(e.position),1),(0,a.Lk)("div",de,[(0,a.Lk)("span",me,'삭제: "'+(0,t.v_)(e.deleted)+'"',1),n[33]||(n[33]=(0,a.Lk)("span",{class:"mod-arrow"},"→",-1)),(0,a.Lk)("span",ve,'삽입: "'+(0,t.v_)(e.inserted)+'"',1)])]))),128))])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Ae,[n[37]||(n[37]=(0,a.Lk)("h4",null,"🔧 원시 diff 데이터",-1)),(0,a.Lk)("details",null,[n[36]||(n[36]=(0,a.Lk)("summary",null,"diff 결과 JSON 보기",-1)),(0,a.Lk)("pre",pe,(0,t.v_)(JSON.stringify(Tn.value,null,2)),1)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Se,[(0,a.Lk)("div",Pe,[n[39]||(n[39]=(0,a.Lk)("label",null,"원문 (정답):",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":n[2]||(n[2]=e=>s.value=e),placeholder:"원문을 입력하세요...",rows:"3"},null,512),[[o.Jo,s.value]])]),(0,a.Lk)("div",he,[n[40]||(n[40]=(0,a.Lk)("label",null,"비교 문장:",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":n[3]||(n[3]=e=>bn.value=e),placeholder:"비교할 문장을 입력하세요...",rows:"3"},null,512),[[o.Jo,bn.value]])]),(0,a.Lk)("div",ge,[(0,a.Lk)("label",null,[(0,a.eW)(" 발음 정확도 임계값: "+(0,t.v_)(Dn.value)+"점 ",1),(0,a.bo)((0,a.Lk)("input",{type:"range","onUpdate:modelValue":n[4]||(n[4]=e=>Dn.value=e),min:"0",max:"100",step:"5",onInput:Zn},null,544),[[o.Jo,Dn.value]])])]),(0,a.Lk)("div",be,[n[42]||(n[42]=(0,a.Lk)("label",null,"SR API 결과 JSON (선택사항):",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":n[5]||(n[5]=e=>Cn.value=e),placeholder:'Microsoft Speech Recognition API 결과 JSON을 입력하세요. 예시: {"NBest": [{"Words": [{"Word": "你好", "PronunciationAssessment": {"AccuracyScore": 85}}]}]}',rows:"6",class:"json-input"},null,512),[[o.Jo,Cn.value]]),(0,a.Lk)("div",ke,[(0,a.Lk)("small",null,[n[41]||(n[41]=(0,a.eW)(" JSON 입력이 없으면 발음 평가 없이 텍스트 비교만 수행됩니다. ")),(0,a.Lk)("button",{type:"button",onClick:os,class:"sample-btn",disabled:xn.value},(0,t.v_)(xn.value?"로딩 중...":"SrResult.json 로드"),9,De)])])]),(0,a.Lk)("button",{onClick:Jn,disabled:!s.value||!bn.value}," 분석하기 ",8,Oe)]),kn.value?((0,a.uX)(),(0,a.CE)("div",Le,[n[62]||(n[62]=(0,a.Lk)("h2",null,"분석 결과",-1)),(0,a.Lk)("div",Te,[(0,a.Lk)("div",Re,[(0,a.Lk)("span",Ne,(0,t.v_)((100*kn.value.accuracy).toFixed(1))+"%",1),n[43]||(n[43]=(0,a.Lk)("span",{class:"accuracy-label"},"정확도",-1))])]),(0,a.Lk)("div",Ee,[(0,a.Lk)("div",We,[n[44]||(n[44]=(0,a.Lk)("h3",null,"원문 (SegmentitTokenizer 토큰화)",-1)),(0,a.Lk)("div",we,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(kn.value.originalWords,(e,n)=>((0,a.uX)(),(0,a.CE)("span",{key:`original-${n}`,class:(0,t.C4)([es(e,"original"),ns(e,n)]),title:`토큰 ${n+1}: ${e} (발음: ${ss(e,n)}점)`},(0,t.v_)(e),11,Ce))),128))]),(0,a.Lk)("div",xe,[(0,a.Lk)("small",null,"총 "+(0,t.v_)(kn.value.originalWords.length)+"개 토큰",1)])]),(0,a.Lk)("div",_e,[n[45]||(n[45]=(0,a.Lk)("h3",null,"비교 문장 (SegmentitTokenizer 토큰화)",-1)),(0,a.Lk)("div",Ie,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(kn.value.compareWords,(e,n)=>((0,a.uX)(),(0,a.CE)("span",{key:`compare-${n}`,class:(0,t.C4)([es(e,"compare"),ns(e,n)]),title:`토큰 ${n+1}: ${e} (발음: ${ss(e,n)}점)`},(0,t.v_)(e),11,Be))),128))]),(0,a.Lk)("div",Xe,[(0,a.Lk)("small",null,"총 "+(0,t.v_)(kn.value.compareWords.length)+"개 토큰",1)])])]),kn.value.pronunciationAnalysis&&kn.value.pronunciationAnalysis.hasData?((0,a.uX)(),(0,a.CE)("div",$e,[n[52]||(n[52]=(0,a.Lk)("h3",null,"🎯 SR API 분석 결과",-1)),(0,a.Lk)("div",je,[(0,a.Lk)("div",Me,[n[50]||(n[50]=(0,a.Lk)("h4",null,"📊 발음 통계",-1)),(0,a.Lk)("div",ze,[(0,a.Lk)("div",Qe,[n[46]||(n[46]=(0,a.Lk)("span",{class:"stat-label"},"전체 단어",-1)),(0,a.Lk)("span",Fe,(0,t.v_)(kn.value.pronunciationAnalysis.pronunciationStats.totalWords)+"개",1)]),(0,a.Lk)("div",Ke,[n[47]||(n[47]=(0,a.Lk)("span",{class:"stat-label"},"발음 오류",-1)),(0,a.Lk)("span",Je,(0,t.v_)(kn.value.pronunciationAnalysis.pronunciationStats.mispronouncedWords)+"개",1)]),(0,a.Lk)("div",Ue,[n[48]||(n[48]=(0,a.Lk)("span",{class:"stat-label"},"평균 정확도",-1)),(0,a.Lk)("span",He,(0,t.v_)(kn.value.pronunciationAnalysis.pronunciationStats.averageAccuracy.toFixed(1))+"점",1)]),(0,a.Lk)("div",Ve,[n[49]||(n[49]=(0,a.Lk)("span",{class:"stat-label"},"전체 점수",-1)),(0,a.Lk)("span",qe,(0,t.v_)(kn.value.pronunciationAnalysis.pronunciationStats.overallScore.toFixed(1))+"점",1)])])]),(0,a.Lk)("div",Ge,[n[51]||(n[51]=(0,a.Lk)("h4",null,"🔊 발음 오류 단어",-1)),kn.value.pronunciationAnalysis.pronunciationErrors.length>0?((0,a.uX)(),(0,a.CE)("div",Ye,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(kn.value.pronunciationAnalysis.pronunciationErrors,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.index,class:"error-item"},[(0,a.Lk)("span",Ze,(0,t.v_)(e.word),1),(0,a.Lk)("span",en,(0,t.v_)(e.accuracyScore)+"점",1),(0,a.Lk)("span",nn,(0,t.v_)(e.errorType),1)]))),128))])):((0,a.uX)(),(0,a.CE)("div",sn,[(0,a.Lk)("span",on,"🎉 모든 단어가 임계값("+(0,t.v_)(kn.value.pronunciationAnalysis.threshold)+"점) 이상입니다!",1)]))])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",an,[(0,a.Lk)("div",tn,[n[53]||(n[53]=(0,a.Lk)("h4",null,"틀린 단어",-1)),(0,a.Lk)("div",rn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(kn.value.errors,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"tag error"},(0,t.v_)(e),1))),128)),kn.value.errors&&0!==kn.value.errors.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",cn," 없음 "))])]),(0,a.Lk)("div",ln,[n[54]||(n[54]=(0,a.Lk)("h4",null,"삽입된 단어",-1)),(0,a.Lk)("div",un,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(kn.value.insertions,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"tag insertion"},(0,t.v_)(e),1))),128)),kn.value.insertions&&0!==kn.value.insertions.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",fn," 없음 "))])]),(0,a.Lk)("div",yn,[n[55]||(n[55]=(0,a.Lk)("h4",null,"생략된 단어",-1)),(0,a.Lk)("div",dn,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(kn.value.omissions,e=>((0,a.uX)(),(0,a.CE)("span",{key:e,class:"tag omission"},(0,t.v_)(e),1))),128)),kn.value.omissions&&0!==kn.value.omissions.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",mn," 없음 "))])]),(0,a.Lk)("div",vn,[(0,a.Lk)("h4",null,"발음 오류 ("+(0,t.v_)(Dn.value)+"점 미만)",1),(0,a.Lk)("div",An,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(On.value,e=>((0,a.uX)(),(0,a.CE)("span",{key:`${e.word}-${e.index}`,class:"tag pronunciation-error",title:`정확도: ${e.accuracyScore}점, 오류유형: ${e.errorType}`},(0,t.v_)(e.word)+" ("+(0,t.v_)(e.accuracyScore)+"점) ",9,pn))),128)),On.value&&0!==On.value.length?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",Sn,(0,t.v_)(Cn.value&&Cn.value.trim()?"없음":"SR API 결과가 필요합니다"),1))])]),kn.value&&kn.value.srResult?((0,a.uX)(),(0,a.CE)("div",Pn,[n[60]||(n[60]=(0,a.Lk)("h4",null,"SR API 결과 정보",-1)),(0,a.Lk)("div",hn,[(0,a.Lk)("p",null,[n[56]||(n[56]=(0,a.Lk)("strong",null,"인식 상태:",-1)),(0,a.eW)(" "+(0,t.v_)(kn.value.srResult.RecognitionStatus||"N/A"),1)]),(0,a.Lk)("p",null,[n[57]||(n[57]=(0,a.Lk)("strong",null,"신뢰도:",-1)),(0,a.eW)(" "+(0,t.v_)(kn.value.srResult.NBest?.[0]?.Confidence?(100*kn.value.srResult.NBest[0].Confidence).toFixed(1):"N/A")+"% ",1)]),(0,a.Lk)("p",null,[n[58]||(n[58]=(0,a.Lk)("strong",null,"지속 시간:",-1)),(0,a.eW)(" "+(0,t.v_)(kn.value.srResult.Duration?(kn.value.srResult.Duration/1e7).toFixed(2):"N/A")+"초 ",1)]),(0,a.Lk)("p",null,[n[59]||(n[59]=(0,a.Lk)("strong",null,"SNR:",-1)),(0,a.eW)(" "+(0,t.v_)(kn.value.srResult.SNR?.toFixed(1)||"N/A")+"dB ",1)])])])):(0,a.Q3)("",!0),Cn.value&&Cn.value.trim()?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",gn,n[61]||(n[61]=[(0,a.Lk)("h4",null,"SR API 결과 없음",-1),(0,a.Lk)("p",null,' 발음 평가를 위해서는 위의 "SR API 결과 JSON" 필드에 Microsoft Speech Recognition API 결과를 입력해주세요. ',-1),(0,a.Lk)("p",null,'샘플 JSON을 로드하려면 "샘플 JSON 로드" 버튼을 클릭하세요.',-1)])))])])):(0,a.Q3)("",!0)]))}},kn=s(1241);const Dn=(0,kn.A)(bn,[["__scopeId","data-v-3e6aea6e"]]);var On=Dn;const Ln={class:"environment-settings"},Tn={class:"current-token"},Rn={class:"tab-navigation"},Nn={key:0,class:"tab-panel"},En={style:{"margin-bottom":"1em"}},Wn={style:{"margin-left":"1em"}},wn={style:{"margin-bottom":"1em"}},Cn=["disabled"],xn=["disabled"],_n={key:0},In=["src"],Bn={key:1},Xn={key:2},$n={key:0,style:{"margin-top":"20px"}},jn={style:{"margin-left":"20px","font-size":"0.9em"}},Mn={key:0},zn={key:0},Qn={key:1},Fn={key:2},Kn={key:1},Jn={key:2},Un={key:0},Hn={key:1},Vn={style:{"margin-left":"20px","font-size":"0.9em"}},qn={key:0},Gn={key:0},Yn={key:1,class:"tab-panel"},Zn={key:2,class:"tab-panel"},es={class:"input-section"},ns={class:"button-group"},ss=["disabled"],os={key:0,class:"result-section"},as={class:"result-content"},ts={class:"result-item"},rs={class:"result-item"},cs={class:"result-item"},ls={class:"result-item"},is={key:3,class:"tab-panel"},us={class:"auth-section"},fs={class:"token-input-group"},ys={class:"token-input-container"},ds=["disabled","title"],ms=["disabled"],vs={class:"upload-section"},As={class:"file-input-group"},ps={class:"recording-controls"},Ss={class:"recording-settings"},Ps={style:{"margin-left":"1em"}},hs={class:"recording-buttons"},gs=["disabled"],bs=["disabled"],ks={key:0,class:"recording-preview"},Ds=["src"],Os={key:0,class:"file-info"},Ls={key:0},Ts={class:"upload-settings"},Rs={class:"setting-group"},Ns={class:"setting-group"},Es={key:0,class:"upload-section",style:{"margin-top":"10px"}},Ws={class:"token-input-container"},ws=["value"],Cs={class:"upload-actions"},xs=["disabled"],_s={key:1,class:"upload-progress"},Is={class:"progress-info"},Bs={class:"progress-text"},Xs={key:2,class:"upload-result"},$s={class:"result-details"},js={key:0},Ms={key:1},zs={key:2},Qs={key:3,class:"evaluate-result"},Fs={key:0,class:"speech-preview"},Ks={class:"audio-preview-container"},Js={class:"audio-info"},Us={key:0},Hs={class:"audio-controls"},Vs=["disabled"],qs={key:0,class:"authenticated-audio-player"},Gs=["src"],Ys={key:1,class:"audio-loading"},Zs={key:2,class:"audio-error"},eo={class:"evaluate-details"},no={key:0},so={key:1},oo={key:2},ao={key:3,class:"pronunciation-analysis"},to=["innerHTML"];var ro={__name:"App",setup(e){const n=(0,r.KR)("voice-recorder"),l=(0,r.KR)("dev"),i=(0,r.KR)(!1),u=(0,r.KR)(!1),f=(0,r.KR)("你好世界"),y=(0,r.KR)({sttText:"",score:null,confidence:null,pronunciationScore:null,message:"",srResult:null}),d=(0,r.KR)(null),m=(0,r.KR)(null),v=(0,r.KR)("尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。"),A=(0,r.KR)(""),p=(0,r.KR)(!1),S=(0,r.KR)(null);(0,a.wB)(A,e=>{e&&e.trim()?((0,c.ym)(e),console.log("🔑 토큰 변경 감지 - 라이브러리에 자동 설정:",e.substring(0,20)+"...")):((0,c.L)(),console.log("🗑️ 토큰 제거 감지 - 라이브러리 토큰 클리어"))}),(0,c._t)({subjectCode:"CTT",environment:(0,c.Rt)(),enableLogging:"dev"===(0,c.Rt)()});const P=(0,r.KR)(null),h=(0,r.KR)(null),g=(0,r.KR)("CTT"),b=(0,r.KR)("尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。"),k=(0,r.KR)(!1),D=(0,r.KR)(""),O=(0,r.KR)(null),L=(0,r.KR)(""),T=(0,r.KR)(!1),R=(0,r.KR)(null),N=(0,r.KR)(.03),E=(0,r.KR)(2e3);let W=null;const w=(0,r.KR)(null),C=(0,r.KR)(!1),x=(0,r.KR)(null),_=(0,r.KR)(.03),I=(0,r.KR)(2e3);async function B(){if(v.value.trim()){m.value=null;try{const{SegmentitTokenizer:e}=await Promise.resolve().then(s.bind(s,9562)),n=new e;await n.initialize();const o=v.value.trim(),a=await n.tokenize(o),t=await n.convertToPinyin(o);m.value={tokens:a,pinyin:t,tokenCount:a.length}}catch(e){console.error("토크나이저 테스트 오류:",e),m.value={tokens:[],pinyin:"변환 실패",tokenCount:0,error:e.message}}}else alert("테스트할 중국어 텍스트를 입력해주세요.")}function X(){v.value="尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",m.value=null}const $=(0,a.EW)(()=>y.value?.analysis?.data?.srAnalysis?.wordPronunciation?.wordDetails?y.value.analysis.data.srAnalysis.wordPronunciation.wordDetails.filter(e=>e.accuracyScore<50):[]),j=(0,a.EW)(()=>P.value&&A.value&&g.value&&b.value.trim());async function M(){p.value=!0,S.value=null;try{(0,c.Rt)();let e;e="/api/dev/token";const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"1234567890",studentTypeCode:"DI"})});if(n.ok){const e=await n.json();console.log("토큰 응답 (JSON):",e),e.data?(A.value=e.data,(0,c.ym)(e.data),S.value={type:"success",message:`토큰을 성공적으로 받았습니다. 라이브러리에 자동 설정됨 (${e.message})`},console.log("인증 토큰 받기 성공:",e.data),console.log("🔑 라이브러리 토큰 자동 설정 완료")):(S.value={type:"error",message:"토큰 데이터가 응답에 없습니다."},console.error("토큰 데이터 없음:",e))}else{const e=await n.json();S.value={type:"error",message:`토큰 요청 실패: ${e.message||"알 수 없는 오류"}`},console.error("토큰 요청 실패:",e)}}catch(e){S.value={type:"error",message:`토큰 요청 중 오류 발생: ${e.message}`},console.error("토큰 요청 오류:",e)}finally{p.value=!1}}function z(){const e=document.getElementById("authToken");if(e){e.select(),e.setSelectionRange(0,99999);try{document.execCommand("copy"),S.value={type:"success",message:"토큰이 복사되었습니다!"},console.log("토큰 복사 성공")}catch(n){S.value={type:"error",message:"토큰 복사 실패: "+n},console.error("토큰 복사 실패:",n)}}}function Q(e){const n=e.target.value;n&&n.trim()?(console.log("🔑 사용자가 토큰 입력:",n.substring(0,20)+"..."),S.value={type:"success",message:"토큰이 라이브러리에 자동 설정되었습니다."}):S.value=null}async function F(e){const n=e.target.files[0];if(n&&n.type.startsWith("audio/")){P.value=n;try{const e=await re.getAudioFileInfo(n);h.value=e.duration,console.log("음성 파일 정보:",e)}catch(s){console.error("파일 정보 가져오기 실패:",s),h.value=null}console.log("파일 선택됨:",n)}}function K(e){if(0===e)return"0 Bytes";const n=1024,s=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(2))+" "+s[o]}function J(e){if(!e||0===e)return"0초";const n=Math.floor(e/60),s=Math.floor(e%60);return n>0?`${n}분 ${s}초`:`${s}초`}async function U(){if(j.value){if(!A.value){if(console.log("토큰이 없습니다. 토큰을 요청합니다..."),await M(),!A.value)return void alert("인증 토큰을 받아올 수 없습니다. 다시 시도해주세요.");console.log("🔑 업로드용 토큰 라이브러리 설정 확인")}k.value=!0,D.value="업로드 준비 중...",O.value=null,L.value="";try{console.log("업로드 시작 - 현재 토큰:",A.value),console.log("업로드 옵션:",{subjectCode:g.value,referenceText:b.value.trim()});const e=await re.uploadVoiceFile({file:P.value,subjectCode:g.value,referenceText:b.value.trim(),sttYn:"Y",onProgress:e=>{D.value=e,console.log("업로드 진행:",e)}});e.success?(L.value=e.url||"",O.value=e,console.log("업로드 완료:",e),e.evaluateResult&&(console.log("Azure 평가 결과:",e.evaluateResult),console.log("발음 분석 결과:",e.evaluateResult.pronunciationResults))):(O.value=e,console.error("업로드 실패:",e.message))}catch(e){O.value={success:!1,message:`업로드 실패: ${e.message}`},console.error("업로드 오류:",e)}finally{k.value=!1}}else alert("업로드에 필요한 모든 정보를 입력해주세요.")}function H(e){if(console.log("generatePronunciationHtml !!!!!!!!!!!!!!!!!!!!!!  시작111"),console.log("generatePronunciationHtml 값 :",e),!e||!Array.isArray(e))return"";console.log("generatePronunciationHtml !!!!!!!!!!!!!!!!!!!!!!  시작222");let n='<div class="pronunciation-results">';return e.forEach((s,o)=>{const{type:a,value:t,operation:r,hasMispronunciation:c,mispronunciations:l}=s;console.log("operation:",r),console.log("type:",a,"hasMispronunciation:",c);let i="";switch(a){case"common":i="";break;case"moved":i="diff-moved";break;case"added":i="diff-added";break;case"removed":i="diff-removed";break;case"moved_from":i="diff-moved-from";break;default:i=""}let u=t;if("added"===a){const n=o>0?e[o-1]:null;n&&"removed"===n.type&&(console.log("교체 패턴 감지: removed 다음의 added를 발음 오류로 처리",{removed:n.value,added:t}),u=`<span class="mispronunciation-error" title="발음 오류: 교체로 추가된 텍스트">${t}</span>`)}if("common"===a&&c&&l&&l.length>0){console.log("발음 오류 처리:",l);const e="mispronunciation-error",s=[];l.forEach(e=>{const{word:n,wordIndex:o=0}=e;if(!n||"string"!==typeof n||0===n.length)return;const a=[],r=new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");let c;while(null!==(c=r.exec(t)))a.push({start:c.index,end:c.index+n.length}),c.index===r.lastIndex&&r.lastIndex++;if(0===a.length)return void console.warn(`값 내에서 단어를 찾지 못함: word="${n}"`);const l=Math.min(Math.max(0,o),a.length-1),i=a[l];i&&s.push({...i,word:n})}),s.sort((e,n)=>e.start-n.start);const o=[];let r=-1;for(const n of s)if(n.start>=r)o.push(n),r=n.end;else{const e=o[o.length-1];n.end-n.start>e.end-e.start&&(o[o.length-1]=n,r=n.end)}for(let n=o.length-1;n>=0;n--){const{start:s,end:a,word:t}=o[n],r=u.slice(0,s),c=u.slice(s,a),l=u.slice(a);u=`${r}<span class="${e}" title="발음 오류: ${t}">${c}</span>${l}`}const c=`pronunciation-word ${i}`.trim();n+=`<span class="${c}" title="오류 유형: ${a}, 차이점 유형: ${a||"unknown"}">${u}</span>`}else{const e=`pronunciation-word ${i}`.trim();n+=`<span class="${e}" title="오류 유형: ${a}, 차이점 유형: ${a||"unknown"}">${u}</span>`}o<e.length-1&&(n+="")}),n+="</div>",console.log("generatePronunciationHtml 결과:",n),n}const V=(0,a.EW)(()=>(console.log("uploadResult.value?.evaluateResult?.textComparison? 결과:",O.value.evaluateResult.textComparison.structuredDiffs),O.value?.evaluateResult?.textComparison?.structuredDiffs?H(O.value.evaluateResult.textComparison.structuredDiffs):"")),q=(0,a.EW)(()=>!!(O.value?.evaluateResult?.textComparison?.structuredDiffs?.length>0));function G(){W&&(W=null),W=new c.RB({silenceThreshold:N.value,silenceDuration:E.value}),W.on("start",()=>{T.value=!0,R.value=null,P.value=null,console.log("업로드용 녹음 시작")}),W.on("stop",async e=>{T.value=!1,R.value=URL.createObjectURL(e);const n=`recorded_${Date.now()}.wav`,s=new File([e],n,{type:"audio/wav"});P.value=s;try{const e=await re.getAudioFileInfo(s);h.value=e.duration,console.log("녹음 파일 정보:",e)}catch(o){console.error("녹음 파일 정보 가져오기 실패:",o),h.value=null}console.log("업로드용 녹음 완료:",n),setTimeout(()=>{j.value?(console.log("🚀 녹음 완료 - 자동 업로드 시작"),U()):console.warn("⚠️ 업로드 조건이 충족되지 않았습니다.",{hasFile:!!P.value,hasToken:!!A.value,hasSubjectCode:!!g.value,hasReferenceText:!!b.value.trim()})},500)}),W.start()}function Y(){W&&W.stop()}function Z(){P.value=null,h.value=null,b.value="",D.value="",O.value=null,L.value="",W&&(W=null),T.value=!1,R.value=null,de();const e=document.getElementById("audioFile");e&&(e.value=""),console.log("업로드 초기화 완료")}function ee(){console.log(`🌍 환경을 '${l.value}'로 변경합니다.`),(0,c._t)({subjectCode:"MATH101",environment:l.value,enableLogging:"dev"===l.value}),re=new c.HA({presignApiUrl:(0,c.e9)("presigned"),azureEvaluateApiUrl:(0,c.e9)("azureEvaluate")}),console.log("📡 새로운 API URLs:",{presigned:(0,c.e9)("presigned"),azureEvaluate:(0,c.e9)("azureEvaluate")}),console.log("🔑 현재 토큰 유지:",A.value?"설정됨":"없음")}function ne(){return A.value&&A.value.trim()?`${A.value.substring(0,20)}...`:"토큰 없음"}let se=null;const oe=new c.Jt((0,c.e9)("presigned")),ae=new c.cn((0,c.e9)("sttRequest"),(0,c.e9)("sttResult")),te=new c.op;let re=new c.HA({presignApiUrl:(0,c.e9)("presigned"),azureEvaluateApiUrl:(0,c.e9)("azureEvaluate")});function ce(){se&&(se=null),se=new c.RB({silenceThreshold:_.value,silenceDuration:I.value}),se.on("start",()=>{i.value=!0,y.value=null,d.value=null}),se.on("stop",async e=>{i.value=!1,d.value=URL.createObjectURL(e),u.value=!0;try{const n=await oe.upload(e),s=await ae.requestSTT(n);console.log("STT 결과:",s);const o=s.DisplayText||(s.NBest&&s.NBest[0]?s.NBest[0].Display:"")||s.text||"",a=await te.analyze(f.value,o,s);y.value={message:"음성 인식 및 분석 완료",sttText:o,srResult:s,confidence:s.NBest?.[0]?.Confidence||0,pronunciationScore:s.NBest?.[0]?.PronunciationAssessment?.PronScore||0,analysis:a}}catch(n){y.value={message:"오류 발생: "+n.message}}u.value=!1}),se.on("silence",()=>{i.value=!1})}function le(){ce(),se.start()}function ie(){se&&se.stop()}function ue(){if(!L.value)return;const e=document.createElement("input");e.value=L.value,document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(e),S.value={type:"success",message:"Presigned URL이 복사되었습니다!"}}function fe(e){return e?.evaluateResult?.data?.speechFileUrl?e.evaluateResult.data.speechFileUrl:null}async function ye(e){if(e&&A.value){C.value=!0,x.value=null,w.value=null;try{console.log("🎵 인증된 오디오 요청:",e),console.log("🔑 사용할 토큰:",A.value.substring(0,20)+"..."),console.log("🔑 토큰 전체 길이:",A.value.length),console.log("🔑 순수 토큰 (Bearer 제외):",A.value.substring(0,30)+"..."),console.log("🔄 원본 URL:",e);const n=new URL(e);console.log("📋 URL 분석:"),console.log("  - 호스트:",n.hostname),console.log("  - 경로:",n.pathname),console.log("  - 쿼리:",n.search),console.log("🔑 순수 토큰 (Bearer 제외):",A.value.substring(0,30)+"...");const s=n.pathname+n.search;console.log("🔄 원본 URL:",e),console.log("🔄 프록시 URL:",s);const o=await fetch(s,{method:"GET",headers:{Authorization:A.value,"Content-Type":"audio/wav"}});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const a=await o.blob();console.log("✅ 오디오 파일 로드 성공, 크기:",a.size,"bytes");const t=URL.createObjectURL(a);w.value=t,console.log("🎵 오디오 재생 준비 완료"),setTimeout(()=>{const e=document.querySelector(".speech-audio-player");e&&e.play().catch(e=>{console.warn("자동 재생 실패 (사용자 상호작용 필요):",e)})},100)}catch(n){console.error("❌ 인증된 오디오 로드 실패:",n),x.value=n.message}finally{C.value=!1}}else x.value="오디오 URL 또는 인증 토큰이 없습니다."}function de(){w.value&&(URL.revokeObjectURL(w.value),w.value=null),x.value=null,console.log("⏹️ 오디오 재생 중지")}function me(){console.log("🎵 오디오 재생 완료")}function ve(e){console.error("❌ 오디오 재생 오류:",e),x.value="오디오 재생 중 오류가 발생했습니다."}return(e,s)=>((0,a.uX)(),(0,a.CE)("div",null,[s[103]||(s[103]=(0,a.Lk)("h1",null,"DKVoiceWeb Vue3 예제",-1)),(0,a.Lk)("div",Ln,[(0,a.Lk)("label",null,[s[16]||(s[16]=(0,a.eW)(" 환경 선택: ")),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),onChange:ee},s[15]||(s[15]=[(0,a.Lk)("option",{value:"dev"},"DEV",-1),(0,a.Lk)("option",{value:"stg"},"STG",-1),(0,a.Lk)("option",{value:"prod"},"PROD",-1)]),544),[[o.u1,l.value]])]),(0,a.Lk)("span",Tn,"현재 토큰: "+(0,t.v_)(ne()),1)]),(0,a.Lk)("div",Rn,[(0,a.Lk)("button",{onClick:s[1]||(s[1]=e=>n.value="voice-recorder"),class:(0,t.C4)([{active:"voice-recorder"===n.value},"tab-btn"])}," 음성 녹음 ",2),(0,a.Lk)("button",{onClick:s[2]||(s[2]=e=>n.value="chinese-compare"),class:(0,t.C4)([{active:"chinese-compare"===n.value},"tab-btn"])}," 중국어 비교 ",2),(0,a.Lk)("button",{onClick:s[3]||(s[3]=e=>n.value="jieba-test"),class:(0,t.C4)([{active:"jieba-test"===n.value},"tab-btn"])}," 토크나이저 테스트 ",2),(0,a.Lk)("button",{onClick:s[4]||(s[4]=e=>n.value="voice-upload"),class:(0,t.C4)([{active:"voice-upload"===n.value},"tab-btn"])}," 음성 파일 업로드 ",2)]),"voice-recorder"===n.value?((0,a.uX)(),(0,a.CE)("div",Nn,[(0,a.Lk)("div",En,[(0,a.Lk)("label",null,[s[17]||(s[17]=(0,a.eW)(" 무음 감지 임계값 (silenceThreshold): ")),(0,a.bo)((0,a.Lk)("input",{type:"number",step:"0.01",min:"0",max:"1","onUpdate:modelValue":s[5]||(s[5]=e=>_.value=e)},null,512),[[o.Jo,_.value,void 0,{number:!0}]])]),(0,a.Lk)("label",Wn,[s[18]||(s[18]=(0,a.eW)(" 무음 지속 시간(ms) (silenceDuration): ")),(0,a.bo)((0,a.Lk)("input",{type:"number",step:"100",min:"500","onUpdate:modelValue":s[6]||(s[6]=e=>I.value=e)},null,512),[[o.Jo,I.value,void 0,{number:!0}]])])]),(0,a.Lk)("div",wn,[s[19]||(s[19]=(0,a.Lk)("label",{for:"originalText",style:{display:"block","margin-bottom":"0.5em"}},[(0,a.Lk)("strong",null,"원문 텍스트:")],-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"originalText","onUpdate:modelValue":s[7]||(s[7]=e=>f.value=e),placeholder:"원문 텍스트를 입력하세요. 예: 你好世界",rows:"3",cols:"60",style:{width:"100%","max-width":"500px"}},null,512),[[o.Jo,f.value]])]),(0,a.Lk)("button",{onClick:le,disabled:i.value},"녹음 시작",8,Cn),(0,a.Lk)("button",{onClick:ie,disabled:!i.value},"녹음 종료",8,xn),d.value?((0,a.uX)(),(0,a.CE)("div",_n,[s[20]||(s[20]=(0,a.Lk)("h2",null,"녹음 파일 미리듣기",-1)),(0,a.Lk)("audio",{src:d.value,controls:""},null,8,In)])):(0,a.Q3)("",!0),u.value?((0,a.uX)(),(0,a.CE)("div",Bn,"처리 중...")):(0,a.Q3)("",!0),y.value&&y.value.sttText?((0,a.uX)(),(0,a.CE)("div",Xn,[s[59]||(s[59]=(0,a.Lk)("h2",null,"인식 결과",-1)),(0,a.Lk)("p",null,[s[21]||(s[21]=(0,a.Lk)("strong",null,"STT 텍스트:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.sttText),1)]),(0,a.Lk)("p",null,[s[22]||(s[22]=(0,a.Lk)("strong",null,"유사도:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.score||"N/A")+"점",1)]),(0,a.Lk)("p",null,[s[23]||(s[23]=(0,a.Lk)("strong",null,"신뢰도:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.confidence?(100*y.value.confidence).toFixed(1):"N/A")+"% ",1)]),(0,a.Lk)("p",null,[s[24]||(s[24]=(0,a.Lk)("strong",null,"발음 점수:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.pronunciationScore?y.value.pronunciationScore.toFixed(1):"N/A")+"점 ",1)]),(0,a.Lk)("h2",null,"피드백: "+(0,t.v_)(y.value.message||"분석 완료"),1),y.value.analysis&&y.value.analysis.data?((0,a.uX)(),(0,a.CE)("div",$n,[s[47]||(s[47]=(0,a.Lk)("h3",null,"3-Way 분석 결과",-1)),(0,a.Lk)("div",jn,[(0,a.Lk)("p",null,[s[25]||(s[25]=(0,a.Lk)("strong",null,"텍스트 유사도:",-1)),(0,a.eW)(" "+(0,t.v_)((100*y.value.analysis.data.textSimilarity?.similarity).toFixed(1))+"% ",1)]),(0,a.Lk)("p",null,[s[26]||(s[26]=(0,a.Lk)("strong",null,"정확도:",-1)),(0,a.eW)(" "+(0,t.v_)((100*y.value.analysis.data.textSimilarity?.accuracy).toFixed(1))+"% ",1)]),y.value.analysis.data.wordAnalysis?((0,a.uX)(),(0,a.CE)("div",Mn,[s[30]||(s[30]=(0,a.Lk)("h4",null,"단어별 분석:",-1)),y.value.analysis.data.wordAnalysis.wrongWords&&y.value.analysis.data.wordAnalysis.wrongWords.length>0?((0,a.uX)(),(0,a.CE)("div",zn,[(0,a.Lk)("p",null,[s[27]||(s[27]=(0,a.Lk)("strong",null,"틀린 단어:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.wordAnalysis.wrongWords.join(", ")),1)])])):(0,a.Q3)("",!0),y.value.analysis.data.wordAnalysis.insertions&&y.value.analysis.data.wordAnalysis.insertions.length>0?((0,a.uX)(),(0,a.CE)("div",Qn,[(0,a.Lk)("p",null,[s[28]||(s[28]=(0,a.Lk)("strong",null,"삽입된 단어:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.wordAnalysis.insertions.join(", ")),1)])])):(0,a.Q3)("",!0),y.value.analysis.data.wordAnalysis.omissions&&y.value.analysis.data.wordAnalysis.omissions.length>0?((0,a.uX)(),(0,a.CE)("div",Fn,[(0,a.Lk)("p",null,[s[29]||(s[29]=(0,a.Lk)("strong",null,"생략된 단어:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.wordAnalysis.omissions.join(", ")),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),y.value.analysis.data.srAnalysis&&y.value.analysis.data.srAnalysis.pronunciationAssessment?((0,a.uX)(),(0,a.CE)("div",Kn,[s[35]||(s[35]=(0,a.Lk)("h4",null,"발음 평가:",-1)),(0,a.Lk)("p",null,[s[31]||(s[31]=(0,a.Lk)("strong",null,"전체 발음 점수:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.pronunciationAssessment.overallScore?.toFixed(1)||"N/A")+"점 ",1)]),(0,a.Lk)("p",null,[s[32]||(s[32]=(0,a.Lk)("strong",null,"정확도 점수:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.pronunciationAssessment.accuracyScore?.toFixed(1)||"N/A")+"점 ",1)]),(0,a.Lk)("p",null,[s[33]||(s[33]=(0,a.Lk)("strong",null,"유창성 점수:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.pronunciationAssessment.fluencyScore?.toFixed(1)||"N/A")+"점 ",1)]),(0,a.Lk)("p",null,[s[34]||(s[34]=(0,a.Lk)("strong",null,"완성도 점수:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.pronunciationAssessment.completenessScore?.toFixed(1)||"N/A")+"점 ",1)])])):(0,a.Q3)("",!0),y.value.analysis.data.srAnalysis&&y.value.analysis.data.srAnalysis.wordPronunciation?((0,a.uX)(),(0,a.CE)("div",Jn,[s[46]||(s[46]=(0,a.Lk)("h4",null,"단어별 발음 분석:",-1)),(0,a.Lk)("p",null,[s[36]||(s[36]=(0,a.Lk)("strong",null,"총 단어 수:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.wordPronunciation.totalWords)+"개 ",1)]),(0,a.Lk)("p",null,[s[37]||(s[37]=(0,a.Lk)("strong",null,"정확한 단어:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.wordPronunciation.accurateWords)+"개 ",1)]),(0,a.Lk)("p",null,[s[38]||(s[38]=(0,a.Lk)("strong",null,"발음 오류 단어:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.wordPronunciation.mispronouncedWords)+"개 ",1)]),(0,a.Lk)("p",null,[s[39]||(s[39]=(0,a.Lk)("strong",null,"생략된 단어:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.wordPronunciation.omittedWords)+"개 ",1)]),(0,a.Lk)("p",null,[s[40]||(s[40]=(0,a.Lk)("strong",null,"삽입된 단어:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.wordPronunciation.insertedWords)+"개 ",1)]),(0,a.Lk)("p",null,[s[41]||(s[41]=(0,a.Lk)("strong",null,"평균 정확도:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.analysis.data.srAnalysis.wordPronunciation.averageAccuracy?.toFixed(1)||"N/A")+"점 ",1)]),y.value.analysis.data.srAnalysis.wordPronunciation.wordDetails&&y.value.analysis.data.srAnalysis.wordPronunciation.wordDetails.length>0?((0,a.uX)(),(0,a.CE)("div",Un,[s[45]||(s[45]=(0,a.Lk)("h5",null,"발음 오류 상세:",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)($.value,(e,n)=>((0,a.uX)(),(0,a.CE)("div",{key:n,style:{"margin-left":"20px","margin-bottom":"10px",padding:"10px",border:"1px solid #ddd","border-radius":"5px"}},[(0,a.Lk)("p",null,[s[42]||(s[42]=(0,a.Lk)("strong",null,"단어:",-1)),(0,a.eW)(" "+(0,t.v_)(e.word),1)]),(0,a.Lk)("p",null,[s[43]||(s[43]=(0,a.Lk)("strong",null,"발음 점수:",-1)),(0,a.eW)(" "+(0,t.v_)(e.accuracyScore?.toFixed(1)||"N/A")+"점 ",1)]),(0,a.Lk)("p",null,[s[44]||(s[44]=(0,a.Lk)("strong",null,"오류 타입:",-1)),(0,a.eW)(" "+(0,t.v_)(e.errorType),1)])]))),128))])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),y.value.srResult?((0,a.uX)(),(0,a.CE)("details",Hn,[s[58]||(s[58]=(0,a.Lk)("summary",null,"SR API 상세 정보",-1)),(0,a.Lk)("div",Vn,[(0,a.Lk)("p",null,[s[48]||(s[48]=(0,a.Lk)("strong",null,"인식 상태:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.RecognitionStatus),1)]),(0,a.Lk)("p",null,[s[49]||(s[49]=(0,a.Lk)("strong",null,"SNR:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.SNR?.toFixed(2)||"N/A"),1)]),(0,a.Lk)("p",null,[s[50]||(s[50]=(0,a.Lk)("strong",null,"지속 시간:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.Duration?(y.value.srResult.Duration/1e7).toFixed(2):"N/A")+"초 ",1)]),y.value.srResult.NBest&&y.value.srResult.NBest[0]?((0,a.uX)(),(0,a.CE)("div",qn,[s[57]||(s[57]=(0,a.Lk)("h4",null,"N-Best 결과:",-1)),(0,a.Lk)("p",null,[s[51]||(s[51]=(0,a.Lk)("strong",null,"Lexical:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.NBest[0].Lexical),1)]),(0,a.Lk)("p",null,[s[52]||(s[52]=(0,a.Lk)("strong",null,"ITN:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.NBest[0].ITN),1)]),y.value.srResult.NBest[0].PronunciationAssessment?((0,a.uX)(),(0,a.CE)("div",Gn,[s[56]||(s[56]=(0,a.Lk)("h4",null,"발음 평가:",-1)),(0,a.Lk)("p",null,[s[53]||(s[53]=(0,a.Lk)("strong",null,"정확도:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.NBest[0].PronunciationAssessment.AccuracyScore)+"점 ",1)]),(0,a.Lk)("p",null,[s[54]||(s[54]=(0,a.Lk)("strong",null,"유창성:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.NBest[0].PronunciationAssessment.FluencyScore)+"점 ",1)]),(0,a.Lk)("p",null,[s[55]||(s[55]=(0,a.Lk)("strong",null,"완성도:",-1)),(0,a.eW)(" "+(0,t.v_)(y.value.srResult.NBest[0].PronunciationAssessment.CompletenessScore)+"점 ",1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),"chinese-compare"===n.value?((0,a.uX)(),(0,a.CE)("div",Yn,[(0,a.bF)(On,{uploadResult:O.value,referenceText:b.value},null,8,["uploadResult","referenceText"])])):(0,a.Q3)("",!0),"jieba-test"===n.value?((0,a.uX)(),(0,a.CE)("div",Zn,[s[66]||(s[66]=(0,a.Lk)("h2",null,"중국어 토크나이저 테스트",-1)),s[67]||(s[67]=(0,a.Lk)("p",null,"segmentit 라이브러리를 사용한 중국어 토크나이저를 테스트합니다.",-1)),(0,a.Lk)("div",es,[s[60]||(s[60]=(0,a.Lk)("label",{for:"testText"},"테스트할 중국어 텍스트:",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"testText","onUpdate:modelValue":s[8]||(s[8]=e=>v.value=e),placeholder:"중국어 텍스트를 입력하세요. 예: 尽管吃了不少苦，但是那段时光最终成为了难以忘记的美好回忆。",rows:"4",cols:"60"},null,512),[[o.Jo,v.value]]),(0,a.Lk)("div",ns,[(0,a.Lk)("button",{onClick:B,disabled:!v.value.trim()}," 토크나이저 테스트 실행 ",8,ss),(0,a.Lk)("button",{onClick:X,class:"clear-btn"},"초기화")])]),m.value?((0,a.uX)(),(0,a.CE)("div",os,[s[65]||(s[65]=(0,a.Lk)("h3",null,"테스트 결과:",-1)),(0,a.Lk)("div",as,[(0,a.Lk)("div",ts,[s[61]||(s[61]=(0,a.Lk)("strong",null,"입력 텍스트:",-1)),(0,a.Lk)("p",null,(0,t.v_)(v.value),1)]),(0,a.Lk)("div",rs,[s[62]||(s[62]=(0,a.Lk)("strong",null,"토큰화 결과:",-1)),(0,a.Lk)("pre",null,(0,t.v_)(m.value.tokens),1)]),(0,a.Lk)("div",cs,[s[63]||(s[63]=(0,a.Lk)("strong",null,"병음 변환:",-1)),(0,a.Lk)("pre",null,(0,t.v_)(m.value.pinyin),1)]),(0,a.Lk)("div",ls,[s[64]||(s[64]=(0,a.Lk)("strong",null,"토큰 개수:",-1)),(0,a.Lk)("span",null,(0,t.v_)(m.value.tokenCount)+"개",1)])])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),"voice-upload"===n.value?((0,a.uX)(),(0,a.CE)("div",is,[s[102]||(s[102]=(0,a.Lk)("h2",null,"음성 파일 업로드",-1)),(0,a.Lk)("div",us,[s[69]||(s[69]=(0,a.Lk)("h3",null,"인증 토큰",-1)),(0,a.Lk)("div",fs,[s[68]||(s[68]=(0,a.Lk)("label",{for:"authToken"},"Authorization Token:",-1)),(0,a.Lk)("div",ys,[(0,a.bo)((0,a.Lk)("input",{id:"authToken","onUpdate:modelValue":s[9]||(s[9]=e=>A.value=e),type:"text",placeholder:"토큰을 입력하거나 '토큰 받기' 버튼을 클릭하세요",class:"token-input",onInput:Q},null,544),[[o.Jo,A.value]]),(0,a.Lk)("button",{onClick:z,disabled:!A.value,class:"copy-token-btn",title:A.value?"토큰 복사":"복사할 토큰이 없습니다"}," 📋 ",8,ds)]),(0,a.Lk)("button",{onClick:M,disabled:p.value,class:"get-token-btn"},(0,t.v_)(p.value?"토큰 요청 중...":"토큰 받기"),9,ms)]),S.value?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,t.C4)(["token-status",S.value.type])},(0,t.v_)(S.value.message),3)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",vs,[s[101]||(s[101]=(0,a.Lk)("h3",null,"음성 파일 업로드",-1)),(0,a.Lk)("div",As,[s[77]||(s[77]=(0,a.Lk)("h4",null,"방법 1: 기존 파일 선택",-1)),s[78]||(s[78]=(0,a.Lk)("label",{for:"audioFile"},"음성 파일 선택:",-1)),(0,a.Lk)("input",{id:"audioFile",type:"file",onChange:F,accept:"audio/*",class:"file-input"},null,32),s[79]||(s[79]=(0,a.Lk)("h4",{style:{"margin-top":"20px"}},"방법 2: 음성 녹음",-1)),s[80]||(s[80]=(0,a.Lk)("div",{class:"auto-upload-notice"},[(0,a.Lk)("p",null,"🎤 녹음이 완료되면 자동으로 파일 업로드가 시작됩니다")],-1)),(0,a.Lk)("div",ps,[(0,a.Lk)("div",Ss,[(0,a.Lk)("label",null,[s[70]||(s[70]=(0,a.eW)(" 무음 감지 임계값: ")),(0,a.bo)((0,a.Lk)("input",{type:"number",step:"0.01",min:"0",max:"1","onUpdate:modelValue":s[10]||(s[10]=e=>N.value=e),class:"setting-input-small"},null,512),[[o.Jo,N.value,void 0,{number:!0}]])]),(0,a.Lk)("label",Ps,[s[71]||(s[71]=(0,a.eW)(" 무음 지속 시간(ms): ")),(0,a.bo)((0,a.Lk)("input",{type:"number",step:"100",min:"500","onUpdate:modelValue":s[11]||(s[11]=e=>E.value=e),class:"setting-input-small"},null,512),[[o.Jo,E.value,void 0,{number:!0}]])])]),(0,a.Lk)("div",hs,[(0,a.Lk)("button",{onClick:G,disabled:T.value,class:"record-btn"}," 녹음 시작 ",8,gs),(0,a.Lk)("button",{onClick:Y,disabled:!T.value,class:"stop-btn"}," 녹음 종료 ",8,bs)]),R.value?((0,a.uX)(),(0,a.CE)("div",ks,[s[72]||(s[72]=(0,a.Lk)("h5",null,"녹음 파일 미리듣기:",-1)),(0,a.Lk)("audio",{src:R.value,controls:""},null,8,Ds)])):(0,a.Q3)("",!0)]),P.value?((0,a.uX)(),(0,a.CE)("div",Os,[(0,a.Lk)("p",null,[s[73]||(s[73]=(0,a.Lk)("strong",null,"선택된 파일:",-1)),(0,a.eW)(" "+(0,t.v_)(P.value.name),1)]),(0,a.Lk)("p",null,[s[74]||(s[74]=(0,a.Lk)("strong",null,"파일 크기:",-1)),(0,a.eW)(" "+(0,t.v_)(K(P.value.size)),1)]),(0,a.Lk)("p",null,[s[75]||(s[75]=(0,a.Lk)("strong",null,"파일 타입:",-1)),(0,a.eW)(" "+(0,t.v_)(P.value.type),1)]),h.value?((0,a.uX)(),(0,a.CE)("p",Ls,[s[76]||(s[76]=(0,a.Lk)("strong",null,"음성 길이:",-1)),(0,a.eW)(" "+(0,t.v_)(J(h.value)),1)])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ts,[(0,a.Lk)("div",Rs,[s[82]||(s[82]=(0,a.Lk)("label",{for:"subjectCode"},"과목 코드:",-1)),(0,a.bo)((0,a.Lk)("select",{id:"subjectCode","onUpdate:modelValue":s[12]||(s[12]=e=>g.value=e),class:"setting-input"},s[81]||(s[81]=[(0,a.Lk)("option",{value:"CTT"},"차이홍 (CTT)",-1),(0,a.Lk)("option",{value:"PDK"},"스코어국어 (PDK)",-1),(0,a.Lk)("option",{value:"STK"},"스텝국어 (STK)",-1),(0,a.Lk)("option",{value:"STE"},"스텝영어 (STE)",-1)]),512),[[o.u1,g.value]])]),(0,a.Lk)("div",Ns,[s[83]||(s[83]=(0,a.Lk)("label",{for:"referenceText"},"정답 텍스트:",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"referenceText","onUpdate:modelValue":s[13]||(s[13]=e=>b.value=e),placeholder:"음성 파일과 비교할 정답 텍스트를 입력하세요",rows:"3",class:"setting-input",style:{resize:"vertical","min-height":"60px"}},null,512),[[o.Jo,b.value]])])]),L.value?((0,a.uX)(),(0,a.CE)("div",Es,[s[84]||(s[84]=(0,a.Lk)("h3",null,"Presigned 업로드 URL",-1)),(0,a.Lk)("div",Ws,[(0,a.Lk)("input",{class:"token-input",value:L.value,readonly:"",placeholder:"Presigned URL"},null,8,ws),(0,a.Lk)("button",{onClick:ue,class:"copy-token-btn",title:"URL 복사"}," 📋 ")])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Cs,[(0,a.Lk)("button",{onClick:U,disabled:!j.value,class:"upload-btn"},(0,t.v_)(k.value?D.value||"업로드 중...":"파일 업로드"),9,xs),(0,a.Lk)("button",{onClick:Z,class:"clear-upload-btn"},"초기화")]),k.value&&D.value?((0,a.uX)(),(0,a.CE)("div",_s,[(0,a.Lk)("div",Is,[(0,a.Lk)("span",Bs,(0,t.v_)(D.value),1),s[85]||(s[85]=(0,a.Lk)("div",{class:"progress-spinner"},null,-1))])])):(0,a.Q3)("",!0),O.value?((0,a.uX)(),(0,a.CE)("div",Xs,[s[100]||(s[100]=(0,a.Lk)("h4",null,"업로드 결과:",-1)),(0,a.Lk)("div",$s,[(0,a.Lk)("p",null,[s[86]||(s[86]=(0,a.Lk)("strong",null,"상태:",-1)),(0,a.eW)(" "+(0,t.v_)(O.value.success?"성공":"실패"),1)]),O.value.fileId?((0,a.uX)(),(0,a.CE)("p",js,[s[87]||(s[87]=(0,a.Lk)("strong",null,"파일 ID:",-1)),(0,a.eW)(" "+(0,t.v_)(O.value.fileId),1)])):(0,a.Q3)("",!0),O.value.url?((0,a.uX)(),(0,a.CE)("p",Ms,[s[88]||(s[88]=(0,a.Lk)("strong",null,"업로드 URL:",-1)),(0,a.eW)(" "+(0,t.v_)(O.value.url),1)])):(0,a.Q3)("",!0),O.value.message?((0,a.uX)(),(0,a.CE)("p",zs,[s[89]||(s[89]=(0,a.Lk)("strong",null,"메시지:",-1)),(0,a.eW)(" "+(0,t.v_)(O.value.message),1)])):(0,a.Q3)("",!0),O.value.evaluateResult?((0,a.uX)(),(0,a.CE)("div",Qs,[s[99]||(s[99]=(0,a.Lk)("h5",null,"Azure 평가 결과:",-1)),fe(O.value)?((0,a.uX)(),(0,a.CE)("div",Fs,[s[94]||(s[94]=(0,a.Lk)("h6",null,"🎵 인식된 음성 파일 미리듣기:",-1)),(0,a.Lk)("div",Ks,[(0,a.Lk)("div",Js,[(0,a.Lk)("p",null,[s[90]||(s[90]=(0,a.Lk)("strong",null,"파일 URL:",-1)),(0,a.eW)(" "+(0,t.v_)(fe(O.value)),1)]),O.value.evaluateResult.data?.speechText?((0,a.uX)(),(0,a.CE)("p",Us,[s[91]||(s[91]=(0,a.Lk)("strong",null,"인식된 텍스트:",-1)),(0,a.eW)(' "'+(0,t.v_)(O.value.evaluateResult.data.speechText)+'" ',1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Hs,[(0,a.Lk)("button",{onClick:s[14]||(s[14]=e=>ye(fe(O.value))),disabled:C.value,class:"play-audio-btn"},(0,t.v_)(C.value?"로딩 중...":"🎵 재생"),9,Vs),w.value?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:de,class:"stop-audio-btn"}," ⏹️ 중지 ")):(0,a.Q3)("",!0)]),w.value?((0,a.uX)(),(0,a.CE)("div",qs,[(0,a.Lk)("audio",{src:w.value,controls:"",onEnded:me,onError:ve,class:"speech-audio-player"},null,40,Gs)])):(0,a.Q3)("",!0),C.value?((0,a.uX)(),(0,a.CE)("div",Ys,s[92]||(s[92]=[(0,a.Lk)("div",{class:"loading-spinner"},null,-1),(0,a.Lk)("span",null,"토큰 인증으로 오디오 파일 로딩 중...",-1)]))):(0,a.Q3)("",!0),x.value?((0,a.uX)(),(0,a.CE)("div",Zs,[(0,a.Lk)("p",null,[s[93]||(s[93]=(0,a.Lk)("strong",null,"❌ 오디오 로드 실패:",-1)),(0,a.eW)(" "+(0,t.v_)(x.value),1)])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",eo,[O.value.evaluateResult.statusCode?((0,a.uX)(),(0,a.CE)("p",no,[s[95]||(s[95]=(0,a.Lk)("strong",null,"상태 코드:",-1)),(0,a.eW)(" "+(0,t.v_)(O.value.evaluateResult.statusCode),1)])):(0,a.Q3)("",!0),O.value.evaluateResult.message?((0,a.uX)(),(0,a.CE)("p",so,[s[96]||(s[96]=(0,a.Lk)("strong",null,"메시지:",-1)),(0,a.eW)(" "+(0,t.v_)(O.value.evaluateResult.message),1)])):(0,a.Q3)("",!0),O.value.evaluateResult.data?((0,a.uX)(),(0,a.CE)("div",oo,[s[97]||(s[97]=(0,a.Lk)("strong",null,"평가 데이터:",-1)),(0,a.Lk)("pre",null,(0,t.v_)(JSON.stringify(O.value,null,2)),1)])):(0,a.Q3)("",!0),q.value?((0,a.uX)(),(0,a.CE)("div",ao,[s[98]||(s[98]=(0,a.Fv)('<h4 data-v-f690ff88>🎯 발음 분석 결과</h4><div class="pronunciation-legend" data-v-f690ff88><div class="legend-item" data-v-f690ff88><span class="legend-color diff-moved-from" data-v-f690ff88></span><span data-v-f690ff88>원워치</span></div><div class="legend-item" data-v-f690ff88><span class="legend-color diff-moved" data-v-f690ff88></span><span data-v-f690ff88>이동됨</span></div><div class="legend-item" data-v-f690ff88><span class="legend-color diff-added" data-v-f690ff88></span><span data-v-f690ff88>추가됨</span></div><div class="legend-item" data-v-f690ff88><span class="legend-color diff-removed" data-v-f690ff88></span><span data-v-f690ff88>삭제됨</span></div><div class="legend-item" data-v-f690ff88><span class="legend-color mispronunciation-error" data-v-f690ff88></span><span data-v-f690ff88>발음 오류</span></div></div>',2)),(0,a.Lk)("div",{class:"pronunciation-display",innerHTML:V.value},null,8,to)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)]))}};const co=(0,kn.A)(ro,[["__scopeId","data-v-f690ff88"]]);var lo=co;(0,o.Ef)(lo).mount("#app")},9562:function(e,n,s){s.d(n,{SegmentitTokenizer:function(){return r}});s(4114),s(8111),s(2489),s(1701),s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);var o=s(6865),a=s.n(o),t=s(7402);class r{constructor(){this.chineseCharRegex=/[\u4e00-\u9fff]/g,this.initialized=!1,this.segmentit=null}async initialize(){try{return console.log("segmentit 토크나이저 초기화 중..."),this.segmentit=(0,t.useDefault)(new t.Segment),this.initialized=!0,console.log("segmentit 토크나이저 초기화 완료"),!0}catch(e){return console.error("segmentit 토크나이저 초기화 실패:",e),this.initialized=!0,!1}}async tokenize(e){if(!e)return[];if(!this.segmentit||!this.initialized)return this.fallbackTokenize(e);try{const n=this.segmentit.doSegment(e);return console.log("segmentit 원본 결과:",n),console.log("result 구조:",JSON.stringify(n,null,2)),n.map(e=>e.w).filter(e=>e.trim().length>0).filter(e=>this.isValidWord(e))}catch(n){return console.error("segmentit 토큰화 실패, 폴백 사용:",n),this.fallbackTokenize(e)}}isValidWord(e){if(!e||0===e.trim().length)return!1;const n=e.trim();return!!/^[\u4e00-\u9fff]+$/.test(n)&&(!/[^\u4e00-\u9fff]/.test(n)&&!/[，。！？；：""''（）【】《》、…—]/.test(n))}fallbackTokenize(e){if(!e)return[];const n=this.normalize(e),s=n.match(this.chineseCharRegex)||[],o=[];let a=0;while(a<s.length){let e=!1;for(let n=Math.min(4,s.length-a);n>=1;n--){const t=s.slice(a,a+n).join("");if(this.commonWords.has(t)){o.push(t),a+=n,e=!0;break}}if(!e){const e=s.slice(a,a+2).join("");o.push(e),a+=2}}return o.filter(e=>e.trim().length>0)}tokenizeByChar(e){if(!e)return[];const n=e.match(this.chineseCharRegex)||[];return n}async tokenizeByWord(e){return await this.tokenize(e)}async calculateSimilarity(e,n){const s=await this.tokenize(e),o=await this.tokenize(n);if(0===s.length&&0===o.length)return 1;if(0===s.length||0===o.length)return 0;const a=new Set(s),t=new Set(o),r=new Set([...a].filter(e=>t.has(e))),c=new Set([...a,...t]);return r.size/c.size}async convertToPinyin(e){if(!e)return"";try{const n=a()(e,{style:a().STYLE_TONE,heteronym:!1});return n.flat().join(" ")}catch(n){return console.error("병음 변환 실패:",n),this.fallbackPinyin(e)}}fallbackPinyin(e){const n={"我":"wǒ","你":"nǐ","他":"tā","她":"tā","它":"tā","我们":"wǒmen","你们":"nǐmen","他们":"tāmen","好":"hǎo","坏":"huài","大":"dà","小":"xiǎo","学习":"xuéxí","工作":"gōngzuò","吃饭":"chīfàn","今天":"jīntiān","明天":"míngtiān","昨天":"zuótiān","中国":"zhōngguó","美国":"měiguó","日本":"rìběn","北京":"běijīng","上海":"shànghǎi","广州":"guǎngzhōu","世界":"shìjiè","学生":"xuéshēng","喜欢":"xǐhuān","中文":"zhōngwén"};return e.split("").map(e=>n[e]||e).join(" ")}normalize(e){return e?e.replace(/[\u3000\u2000-\u200f\u2028-\u202f\u205f-\u206f]/g," ").replace(/\s+/g," ").trim():""}async analyzeDifferences(e,n){const s=await this.tokenize(e),o=await this.tokenize(n),a=new Set(s),t=new Set(o),r=s.filter(e=>!t.has(e)),c=o.filter(e=>!a.has(e));return{omissions:r,additions:c,similarity:await this.calculateSimilarity(e,n)}}isInitialized(){return this.initialized}}}},n={};function s(o){var a=n[o];if(void 0!==a)return a.exports;var t=n[o]={exports:{}};return e[o].call(t.exports,t,t.exports,s),t.exports}s.m=e,function(){var e=[];s.O=function(n,o,a,t){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],t=e[u][2];for(var c=!0,l=0;l<o.length;l++)(!1&t||r>=t)&&Object.keys(s.O).every(function(e){return s.O[e](o[l])})?o.splice(l--,1):(c=!1,t<r&&(r=t));if(c){e.splice(u--,1);var i=a();void 0!==i&&(n=i)}}return n}t=t||0;for(var u=e.length;u>0&&e[u-1][2]>t;u--)e[u]=e[u-1];e[u]=[o,a,t]}}(),function(){s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,{a:n}),n}}(),function(){var e,n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};s.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var t=Object.create(null);s.r(t);var r={};e=e||[null,n({}),n([]),n(n)];for(var c=2&a&&o;("object"==typeof c||"function"==typeof c)&&!~e.indexOf(c);c=n(c))Object.getOwnPropertyNames(c).forEach(function(e){r[e]=function(){return o[e]}});return r["default"]=function(){return o},s.d(t,r),t}}(),function(){s.d=function(e,n){for(var o in n)s.o(n,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce(function(n,o){return s.f[o](e,n),n},[]))}}(),function(){s.u=function(e){return"js/"+e+".cbaf4582.js"}}(),function(){s.miniCssF=function(e){}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={},n="dkvoice-web-vue:";s.l=function(o,a,t,r){if(e[o])e[o].push(a);else{var c,l;if(void 0!==t)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u++){var f=i[u];if(f.getAttribute("src")==o||f.getAttribute("data-webpack")==n+t){c=f;break}}c||(l=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.setAttribute("data-webpack",n+t),c.src=o),e[o]=[a];var y=function(n,s){c.onerror=c.onload=null,clearTimeout(d);var a=e[o];if(delete e[o],c.parentNode&&c.parentNode.removeChild(c),a&&a.forEach(function(e){return e(s)}),n)return n(s)},d=setTimeout(y.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=y.bind(null,c.onerror),c.onload=y.bind(null,c.onload),l&&document.head.appendChild(c)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.f.j=function(n,o){var a=s.o(e,n)?e[n]:void 0;if(0!==a)if(a)o.push(a[2]);else{var t=new Promise(function(s,o){a=e[n]=[s,o]});o.push(a[2]=t);var r=s.p+s.u(n),c=new Error,l=function(o){if(s.o(e,n)&&(a=e[n],0!==a&&(e[n]=void 0),a)){var t=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;c.message="Loading chunk "+n+" failed.\n("+t+": "+r+")",c.name="ChunkLoadError",c.type=t,c.request=r,a[1](c)}};s.l(r,l,"chunk-"+n,n)}},s.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,t,r=o[0],c=o[1],l=o[2],i=0;if(r.some(function(n){return 0!==e[n]})){for(a in c)s.o(c,a)&&(s.m[a]=c[a]);if(l)var u=l(s)}for(n&&n(o);i<r.length;i++)t=r[i],s.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return s.O(u)},o=self["webpackChunkdkvoice_web_vue"]=self["webpackChunkdkvoice_web_vue"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],function(){return s(3678)});o=s.O(o)})();
//# sourceMappingURL=app.4a848034.js.map