"use strict";(self["webpackChunkdkvoice_web_vue"]=self["webpackChunkdkvoice_web_vue"]||[]).push([[448],{1448:function(e,t,i){i.d(t,{SegmentitTokenizer:function(){return r}});i(4114),i(8111),i(2489),i(1701),i(7642),i(8004),i(3853),i(5876),i(2475),i(5024),i(1698);var n=i(6865),s=i(7402);class r{constructor(){this.chineseCharRegex=/[\u4e00-\u9fff]/g,this.initialized=!1,this.segmentit=null}async initialize(){try{return console.log("segmentit 토크나이저 초기화 중..."),this.segmentit=(0,s.useDefault)(new s.Segment),this.initialized=!0,console.log("segmentit 토크나이저 초기화 완료"),!0}catch(e){return console.error("segmentit 토크나이저 초기화 실패:",e),this.initialized=!0,!1}}async tokenize(e){if(!e)return[];if(!this.segmentit||!this.initialized)return this.fallbackTokenize(e);try{const t=this.segmentit.doSegment(e);return console.log("segmentit 원본 결과:",t),console.log("result 구조:",JSON.stringify(t,null,2)),t.map(e=>e.w).filter(e=>e.trim().length>0).filter(e=>this.isValidWord(e))}catch(t){return console.error("segmentit 토큰화 실패, 폴백 사용:",t),this.fallbackTokenize(e)}}isValidWord(e){if(!e||0===e.trim().length)return!1;const t=e.trim();return!!/^[\u4e00-\u9fff]+$/.test(t)&&(!/[^\u4e00-\u9fff]/.test(t)&&!/[，。！？；：""''（）【】《》、…—]/.test(t))}fallbackTokenize(e){if(!e)return[];const t=this.normalize(e),i=t.match(this.chineseCharRegex)||[],n=[];let s=0;while(s<i.length){let e=!1;for(let t=Math.min(4,i.length-s);t>=1;t--){const r=i.slice(s,s+t).join("");if(this.commonWords.has(r)){n.push(r),s+=t,e=!0;break}}if(!e){const e=i.slice(s,s+2).join("");n.push(e),s+=2}}return n.filter(e=>e.trim().length>0)}tokenizeByChar(e){if(!e)return[];const t=e.match(this.chineseCharRegex)||[];return t}async tokenizeByWord(e){return await this.tokenize(e)}async calculateSimilarity(e,t){const i=await this.tokenize(e),n=await this.tokenize(t);if(0===i.length&&0===n.length)return 1;if(0===i.length||0===n.length)return 0;const s=new Set(i),r=new Set(n),l=new Set([...s].filter(e=>r.has(e))),a=new Set([...s,...r]);return l.size/a.size}async convertToPinyin(e){if(!e)return"";try{const t=n(e,{style:n.STYLE_TONE,heteronym:!1});return t.flat().join(" ")}catch(t){return console.error("병음 변환 실패:",t),this.fallbackPinyin(e)}}fallbackPinyin(e){const t={"我":"wǒ","你":"nǐ","他":"tā","她":"tā","它":"tā","我们":"wǒmen","你们":"nǐmen","他们":"tāmen","好":"hǎo","坏":"huài","大":"dà","小":"xiǎo","学习":"xuéxí","工作":"gōngzuò","吃饭":"chīfàn","今天":"jīntiān","明天":"míngtiān","昨天":"zuótiān","中国":"zhōngguó","美国":"měiguó","日本":"rìběn","北京":"běijīng","上海":"shànghǎi","广州":"guǎngzhōu","世界":"shìjiè","学生":"xuéshēng","喜欢":"xǐhuān","中文":"zhōngwén"};return e.split("").map(e=>t[e]||e).join(" ")}normalize(e){return e?e.replace(/[\u3000\u2000-\u200f\u2028-\u202f\u205f-\u206f]/g," ").replace(/\s+/g," ").trim():""}async analyzeDifferences(e,t){const i=await this.tokenize(e),n=await this.tokenize(t),s=new Set(i),r=new Set(n),l=i.filter(e=>!r.has(e)),a=n.filter(e=>!s.has(e));return{omissions:l,additions:a,similarity:await this.calculateSimilarity(e,t)}}isInitialized(){return this.initialized}}}}]);
//# sourceMappingURL=448.cbaf4582.js.map